[
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<h5 class=\"card-title \">> <b>Mes statistiques</b></h5>\n<h6 class=\"card-subtitle mb-2 text-muted\">\n    <p>Statistiques du Mois</p>\n</h6>",
  "modified": "2024-03-29 16:38:07.579830",
  "name": "Mes stats",
  "private": 0,
  "roles": [],
  "script": null,
  "style": null
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div style=\"padding: 10px;\">\n    <table style=\"width: 100%; border-collapse: collapse;\">\n        <tr>\n            \n            <td style=\"text-align: left;\">\n                <button class=\"btn btn-primary btn-xs\" onclick=\"window.location.href='/app/customer/new'\" style=\"margin-right: 10px;\">+ Nouveau Client</button>\n                \n            </td>\n        </tr>\n        <tr>\n            \n            <td style=\"text-align: left;\">\n                <button class=\"btn btn-primary btn-xs\" onclick=\"window.location.href='/app/visite-commerciale/new'\" style=\"margin-right: 10px;\">+ Nouvelle Visite</button>\n                </td>\n        </tr>\n        <tr>\n            \n            <td style=\"text-align: left;\">\n                <button class=\"btn btn-primary btn-xs\" onclick=\"window.location.href='/app/appel-telephonique/new'\" style=\"margin-right: 10px;\">+ Nouvel Appel</button>\n                </td>\n        </tr>\n    </table>\n</div>\n",
  "modified": "2024-08-28 01:40:10.184682",
  "name": "Liens Acceuil",
  "private": 0,
  "roles": [],
  "script": null,
  "style": ".btn {\n    padding: 5px 10px;\n    border: none;\n    cursor: pointer;\n}\n\n.btn-primary {\n    background-color: #007bff;\n    color: white;\n}\n\n.btn-secondary {\n    background-color: #6c757d;\n    color: white;\n}\n\n.btn-xs {\n    padding: 1px 3px;\n    font-size: 0.75em;\n}\n\ntable {\n    width: 100%;\n}\n\ntd {\n    padding: 5px;\n}\n\ntd:nth-child(2) {\n    text-align: left;\n    padding-left: 10px; /* Ajuster l'espacement pour rapprocher les boutons du texte */\n}\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div style=\"padding: 10px;\">\n    <h3>Configuration</h3>\n    <ul>\n        <li>\n            <a href=\"/app/customer\">Clients →</a>\n            <button class=\"btn btn-primary btn-xs\">Liste</button>\n            <button class=\"btn btn-secondary btn-xs\">Nouveau</button>\n        </li>\n        <li>\n            <a href=\"/app/opportunite\">Opportunités →</a>\n            <button class=\"btn btn-primary btn-xs\">Liste</button>\n            <button class=\"btn btn-secondary btn-xs\">Nouveau</button>\n        </li>\n        <li>\n            <a href=\"/app/visite-commerciale\">Visites →</a>\n            <button class=\"btn btn-primary btn-xs\">Liste</button>\n            <button class=\"btn btn-secondary btn-xs\">Nouveau</button>\n        </li>\n        <li>\n            <a href=\"/app/appel-telephonique\">Appels →</a>\n            <button class=\"btn btn-primary btn-xs\">Liste</button>\n            <button class=\"btn btn-secondary btn-xs\">Nouveau</button>\n        </li>\n    </ul>\n</div>\n",
  "modified": "2024-08-15 16:38:31.710388",
  "name": "Configuration",
  "private": 0,
  "roles": [],
  "script": null,
  "style": ".btn {\n    padding: 5px 10px;\n    border: none;\n    cursor: pointer;\n}\n\n.btn-primary {\n    background-color: #007bff;\n    color: white;\n}\n\n.btn-secondary {\n    background-color: #6c757d;\n    color: white;\n}\n\n.btn-xs {\n    padding: 1px 3px;\n    font-size: 0.75em;\n}\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "\n                    \n                    <h4 class=\"card-title \"><b>Menu Appels</b></h4>\n\n           \n               \n                    <h6 class=\"card-subtitle mb-2 text-muted\">\n                       \n                             \n                             <p class=\"some-class\" id=\"dateAffichee\"></p>\n\n    \n                             \n                             \n                    </h6>",
  "modified": "2024-08-25 15:54:41.326107",
  "name": "Menu Appels",
  "private": 0,
  "roles": [],
  "script": "// Récupérer la date du jour\nvar dateDuJour = new Date();\n\n// Obtenir les composants de la date\nvar jour = dateDuJour.getDate();\nvar mois = dateDuJour.getMonth() + 1; // Les mois commencent à 0, donc ajout de 1\nvar annee = dateDuJour.getFullYear();\n\n// Formater la date\nvar dateFormatee = jour + '/' + mois + '/' + annee;\n\n// Récupérer l'élément avec la classe \"some-class\" dans le framework Frappe\nvar someClassElement = root_element.querySelector('.some-class');\n\n// Mettre à jour le contenu de l'élément avec la date formatée\nsomeClassElement.textContent = \"Date du jour : \" + dateFormatee;\n",
  "style": "        body {\r\n            font-family: 'Rubik', sans-serif;\r\n            height: 100% !important;\r\n            background-color: #3F51B5 !important;\r\n        }\r\n\r\n\r\n        #star {\r\n            margin-left: -5px !important;\r\n            vertical-align: bottom !important;\r\n            opacity: 0.5;\r\n        }\r\n\r\n\r\n        .more {\r\n            opacity: 0.5 !important;\r\n        }\r\n\r\n        .btn:hover {\r\n            color: black !important;\r\n        }\r\n\r\n        .vl {\r\n            margin: 0px !important;\r\n            width: 2px;\r\n            border-right: 1px solid #aaaaaa;\r\n            height: 25px;\r\n        }\r\n\r\n\r\n        #plus {\r\n            opacity: 0.8;\r\n        }\r\n\r\n\r\n        .card {\r\n            border-radius: 10px !important;\r\n        }\r\n\r\n        a:hover {\r\n            background-color: #ccc !important;\r\n        }\r\n\r\n\r\n\r\n        .btn-outlined:active {\r\n            color: #FFF;\r\n            border-color: #fff !important;\r\n        }\r\n\r\n\r\n        img {\r\n\r\n            cursor: pointer;\r\n            overflow: visible;\r\n        }\r\n\r\n        .btn:focus,\r\n        .btn:active {\r\n            outline: none !important;\r\n            box-shadow: none !important;\r\n        }\r\n\r\n\t.container{\r\n\t   margin-top:0px !important;\r\n\t}\r\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "\n                    \n                    <h4 class=\"card-title \"><b>Menu Opportunités</b></h4>\n\n           \n               \n                    <h6 class=\"card-subtitle mb-2 text-muted\">\n                       \n                             \n                             <p class=\"some-class\" id=\"dateAffichee\"></p>\n\n    \n                             \n                             \n                    </h6>",
  "modified": "2024-08-25 15:56:08.939367",
  "name": "Menu Opportunites",
  "private": 0,
  "roles": [],
  "script": "// Récupérer la date du jour\nvar dateDuJour = new Date();\n\n// Obtenir les composants de la date\nvar jour = dateDuJour.getDate();\nvar mois = dateDuJour.getMonth() + 1; // Les mois commencent à 0, donc ajout de 1\nvar annee = dateDuJour.getFullYear();\n\n// Formater la date\nvar dateFormatee = jour + '/' + mois + '/' + annee;\n\n// Récupérer l'élément avec la classe \"some-class\" dans le framework Frappe\nvar someClassElement = root_element.querySelector('.some-class');\n\n// Mettre à jour le contenu de l'élément avec la date formatée\nsomeClassElement.textContent = \"Date du jour : \" + dateFormatee;\n",
  "style": "        body {\r\n            font-family: 'Rubik', sans-serif;\r\n            height: 100% !important;\r\n            background-color: #3F51B5 !important;\r\n        }\r\n\r\n\r\n        #star {\r\n            margin-left: -5px !important;\r\n            vertical-align: bottom !important;\r\n            opacity: 0.5;\r\n        }\r\n\r\n\r\n        .more {\r\n            opacity: 0.5 !important;\r\n        }\r\n\r\n        .btn:hover {\r\n            color: black !important;\r\n        }\r\n\r\n        .vl {\r\n            margin: 0px !important;\r\n            width: 2px;\r\n            border-right: 1px solid #aaaaaa;\r\n            height: 25px;\r\n        }\r\n\r\n\r\n        #plus {\r\n            opacity: 0.8;\r\n        }\r\n\r\n\r\n        .card {\r\n            border-radius: 10px !important;\r\n        }\r\n\r\n        a:hover {\r\n            background-color: #ccc !important;\r\n        }\r\n\r\n\r\n\r\n        .btn-outlined:active {\r\n            color: #FFF;\r\n            border-color: #fff !important;\r\n        }\r\n\r\n\r\n        img {\r\n\r\n            cursor: pointer;\r\n            overflow: visible;\r\n        }\r\n\r\n        .btn:focus,\r\n        .btn:active {\r\n            outline: none !important;\r\n            box-shadow: none !important;\r\n        }\r\n\r\n\t.container{\r\n\t   margin-top:0px !important;\r\n\t}\r\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "\n                    \n                    <h4 class=\"card-title \"><b>Menu Clients</b></h4>\n\n           \n               \n                    <h6 class=\"card-subtitle mb-2 text-muted\">\n                       \n                             \n                             <p class=\"some-class\" id=\"dateAffichee\"></p>\n\n    \n                             \n                             \n                    </h6>",
  "modified": "2024-08-25 16:02:38.243599",
  "name": "Menu Clients",
  "private": 0,
  "roles": [],
  "script": "// Récupérer la date du jour\nvar dateDuJour = new Date();\n\n// Obtenir les composants de la date\nvar jour = dateDuJour.getDate();\nvar mois = dateDuJour.getMonth() + 1; // Les mois commencent à 0, donc ajout de 1\nvar annee = dateDuJour.getFullYear();\n\n// Formater la date\nvar dateFormatee = jour + '/' + mois + '/' + annee;\n\n// Récupérer l'élément avec la classe \"some-class\" dans le framework Frappe\nvar someClassElement = root_element.querySelector('.some-class');\n\n// Mettre à jour le contenu de l'élément avec la date formatée\nsomeClassElement.textContent = \"Date du jour : \" + dateFormatee;\n",
  "style": "        body {\r\n            font-family: 'Rubik', sans-serif;\r\n            height: 100% !important;\r\n            background-color: #3F51B5 !important;\r\n        }\r\n\r\n\r\n        #star {\r\n            margin-left: -5px !important;\r\n            vertical-align: bottom !important;\r\n            opacity: 0.5;\r\n        }\r\n\r\n\r\n        .more {\r\n            opacity: 0.5 !important;\r\n        }\r\n\r\n        .btn:hover {\r\n            color: black !important;\r\n        }\r\n\r\n        .vl {\r\n            margin: 0px !important;\r\n            width: 2px;\r\n            border-right: 1px solid #aaaaaa;\r\n            height: 25px;\r\n        }\r\n\r\n\r\n        #plus {\r\n            opacity: 0.8;\r\n        }\r\n\r\n\r\n        .card {\r\n            border-radius: 10px !important;\r\n        }\r\n\r\n        a:hover {\r\n            background-color: #ccc !important;\r\n        }\r\n\r\n\r\n\r\n        .btn-outlined:active {\r\n            color: #FFF;\r\n            border-color: #fff !important;\r\n        }\r\n\r\n\r\n        img {\r\n\r\n            cursor: pointer;\r\n            overflow: visible;\r\n        }\r\n\r\n        .btn:focus,\r\n        .btn:active {\r\n            outline: none !important;\r\n            box-shadow: none !important;\r\n        }\r\n\r\n\t.container{\r\n\t   margin-top:0px !important;\r\n\t}\r\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div class=\"div\">\n<img src=\"/files/logo_aures387df1.png\" width=\"225px\" height=\"60px\" alt=\"Aures Emballages\">\n<p class=\"nom\"></p>\n<h6 class=\"card-subtitle mb-2 text-muted\">\n<p class=\"some-class\" id=\"dateAffichee\"></p>\n</h6>\n</div>",
  "modified": "2024-11-15 11:04:55.464214",
  "name": "CRM Accueil",
  "private": 0,
  "roles": [],
  "script": "// Récupérer la date du jour\nvar dateDuJour = new Date();\n\n// Obtenir les composants de la date\nvar jour = dateDuJour.getDate();\nvar mois = dateDuJour.getMonth() + 1; // Les mois commencent à 0, donc ajout de 1\nvar annee = dateDuJour.getFullYear();\nvar title = frappe.session.user_fullname;\n\n// Formater la date\nvar dateFormatee = jour + '/' + mois + '/' + annee;\n\n// Récupérer l'élément avec la classe \"some-class\" dans le framework Frappe\nvar someClassElement = root_element.querySelector('.some-class');\nvar nom = root_element.querySelector('.nom');\n\n// Mettre à jour le contenu de l'élément avec la date formatée\n\nnom.innerHTML = \"Bonjour <strong>\" + title + \"</strong>\";\nsomeClassElement.innerHTML = dateFormatee;\n",
  "style": ".div {\n    background-color: #457B9D;\n    border: 0.5px solid lightgray;\n    padding: 0px;\n    white-space: nowrap;\n    border-radius: 10px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    text-align: center;\n    color: white;\n}\n\n.some-class {\n    color: white; /* Assure que la date est en blanc */\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "\n                    \n                    <h4 class=\"card-title \"><b>Menu Visites</b></h4>\n\n           \n               \n                    <h6 class=\"card-subtitle mb-2 text-muted\">\n                       \n                             \n                             <p class=\"some-class\" id=\"dateAffichee\"></p>\n\n    \n                             \n                             \n                    </h6>",
  "modified": "2024-08-25 15:55:49.748180",
  "name": "Menu Visites",
  "private": 0,
  "roles": [],
  "script": "// Récupérer la date du jour\nvar dateDuJour = new Date();\n\n// Obtenir les composants de la date\nvar jour = dateDuJour.getDate();\nvar mois = dateDuJour.getMonth() + 1; // Les mois commencent à 0, donc ajout de 1\nvar annee = dateDuJour.getFullYear();\n\n// Formater la date\nvar dateFormatee = jour + '/' + mois + '/' + annee;\n\n// Récupérer l'élément avec la classe \"some-class\" dans le framework Frappe\nvar someClassElement = root_element.querySelector('.some-class');\n\n// Mettre à jour le contenu de l'élément avec la date formatée\nsomeClassElement.textContent = \"Date du jour : \" + dateFormatee;\n",
  "style": "        body {\r\n            font-family: 'Rubik', sans-serif;\r\n            height: 100% !important;\r\n            background-color: #3F51B5 !important;\r\n        }\r\n\r\n\r\n        #star {\r\n            margin-left: -5px !important;\r\n            vertical-align: bottom !important;\r\n            opacity: 0.5;\r\n        }\r\n\r\n\r\n        .more {\r\n            opacity: 0.5 !important;\r\n        }\r\n\r\n        .btn:hover {\r\n            color: black !important;\r\n        }\r\n\r\n        .vl {\r\n            margin: 0px !important;\r\n            width: 2px;\r\n            border-right: 1px solid #aaaaaa;\r\n            height: 25px;\r\n        }\r\n\r\n\r\n        #plus {\r\n            opacity: 0.8;\r\n        }\r\n\r\n\r\n        .card {\r\n            border-radius: 10px !important;\r\n        }\r\n\r\n        a:hover {\r\n            background-color: #ccc !important;\r\n        }\r\n\r\n\r\n\r\n        .btn-outlined:active {\r\n            color: #FFF;\r\n            border-color: #fff !important;\r\n        }\r\n\r\n\r\n        img {\r\n\r\n            cursor: pointer;\r\n            overflow: visible;\r\n        }\r\n\r\n        .btn:focus,\r\n        .btn:active {\r\n            outline: none !important;\r\n            box-shadow: none !important;\r\n        }\r\n\r\n\t.container{\r\n\t   margin-top:0px !important;\r\n\t}\r\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div class=\"mobile-only mobile-quick-actions\">\n    <div class=\"grid-actions\">\n        <!-- Bouton 1 : RDV -->\n        <button\n            type=\"button\"\n            class=\"btn-outlined\"\n            onclick=\"frappe.set_route('Form', 'Rendez Vous Client', 'new-rendez-vous-client-vmcitbxgho')\"\n        >\n            <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"16\"\n                height=\"16\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"#118ab2\"\n                stroke-width=\"1\"\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n            >\n                <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n                <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line>\n                <line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line>\n            </svg>\n            <span>RDV Client</span>\n        </button>\n        <!-- Bouton 2 : Visite -->\n        <button\n            type=\"button\"\n            class=\"btn-outlined\"\n            onclick=\"frappe.set_route('Form', 'Visite Commerciale', 'new-visite-commerciale-vmcitbxgho')\"\n        >\n            <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"16\"\n                height=\"16\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"#118ab2\"\n                stroke-width=\"1\"\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n            >\n                <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n                <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line>\n                <line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line>\n            </svg>\n            <span>Visite</span>\n        </button>\n        <!-- Bouton 3 : Client -->\n        <button\n            type=\"button\"\n            class=\"btn-outlined\"\n            onclick=\"frappe.set_route('Form', 'Customer', 'new-customer-xmjysiwlca')\"\n        >\n            <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"16\"\n                height=\"16\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"#118ab2\"\n                stroke-width=\"1\"\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n            >\n                <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n                <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line>\n                <line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line>\n            </svg>\n            <span>Client</span>\n        </button>\n        \n        <!-- Bouton 4 : Article -->\n        <button\n            type=\"button\"\n            class=\"btn-outlined\"\n            onclick=\"frappe.set_route('Form', 'Item', 'new-item-1')\"\n        >\n            <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"16\"\n                height=\"16\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"#118ab2\"\n                stroke-width=\"1\"\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n            >\n                <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n                <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line>\n                <line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line>\n            </svg>\n            <span>Article</span>\n        </button>\n\n    </div>\n</div>\n",
  "modified": "2025-02-20 12:14:43.259383",
  "name": "Boutons Accueil",
  "private": 0,
  "roles": [],
  "script": null,
  "style": "/* \n  1) Cacher le container par défaut\n  2) L'afficher uniquement sous 768px\n*/\n.mobile-only {\n    display: none;\n}\n@media (max-width: 1024px) {\n    .mobile-only {\n        display: block !important;\n    }\n}\n\n/* Container global des quick actions */\n.mobile-quick-actions {\n    padding: 0rem;\n    font-family: \"Inter\", sans-serif;\n}\n\n/* Grille 2 x 2 */\n.grid-actions {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 0.5rem;\n    \n    \n}\n\n/* \n  Bouton \"outlined\" style\n  - Bord gris\n  - Fond blanc\n  - Texte et icône gris foncé\n  - Icône \"stroke=currentColor\" => s'aligne sur la couleur du texte\n*/\n.btn-outlined {\n    display: inline-flex;\n    align-items: center;\n    gap: 0.5rem;\n\n    /* Dimensions et apparence */\n    padding: 0.5rem 1rem;\n    background-color: #f9fafb;\n    color: #374151;               /* Gris foncé */\n    border: 1px solid #cbd5e0;    /* Gris clair */\n    border-radius: 0.5rem;\n    font-size: 12px;\n    font-weight: 500;\n    cursor: pointer;\n    text-align: center;\n\n    transition: background-color 0.2s ease, border-color 0.2s ease;\n}\n\n/* Survol : légère variation de couleur */\n.btn-outlined:hover {\n    background-color: #f9fafb;\n    border-color: #b8c2cc; \n}\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div class=\"home-cards-container\">\n  <!-- Carte : Clients -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\">\n        <path d=\"M5 20V19C5 15.134 8.13401 12 12 12V12C15.866 12 19 15.134 19 19V20\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M12 12C14.2091 12 16 10.2091 16 8C16 5.79086 14.2091 4 12 4C9.79086 4 8 5.79086 8 8C8 10.2091 9.79086 12 12 12Z\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n      </svg>\n    </div>\n    <div class=\"card-title\">Clients</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Customer')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n      <button class=\"action-btn\" onclick=\"frappe.new_doc('Customer')\">+</button>\n    </div>\n  </div>\n\n  <!-- Carte : Articles -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\">\n        <path d=\"M2.6954 7.18536L11.6954 11.1854L12.3046 9.81464L3.3046 5.81464L2.6954 7.18536ZM12.75 21.5V10.5H11.25V21.5H12.75ZM12.3046 11.1854L21.3046 7.18536L20.6954 5.81464L11.6954 9.81464L12.3046 11.1854Z\" fill=\"#000000\"></path>\n        <path d=\"M3 17.1101V6.88992C3 6.65281 3.13964 6.43794 3.35632 6.34164L11.7563 2.6083C11.9115 2.53935 12.0885 2.53935 12.2437 2.6083L20.6437 6.34164C20.8604 6.43794 21 6.65281 21 6.88992V17.1101C21 17.3472 20.8604 17.5621 20.6437 17.6584L12.2437 21.3917C12.0885 21.4606 11.9115 21.4606 11.7563 21.3917L3.35632 17.6584C3.13964 17.5621 3 17.3472 3 17.1101Z\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M7.5 4.5L16.1437 8.34164C16.3604 8.43794 16.5 8.65281 16.5 8.88992V12.5\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n      </svg>  \n    </div>\n    <div class=\"card-title\">Articles</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Item')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n      <button class=\"action-btn\" onclick=\"frappe.new_doc('Item')\">+</button>\n    </div>\n  </div>\n\n  <!-- Carte : Visites -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\">\n        <path d=\"M5 15L5.95039 4.54568C5.97849 4.23663 6.23761 4 6.54793 4H20.343C20.6958 4 20.9725 4.30295 20.9405 4.65432L20.0496 14.4543C20.0215 14.7634 19.7624 15 19.4521 15H5ZM5 15L4.4 21\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M9 7.5L16 11.5\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n      </svg>\n    </div>\n    <div class=\"card-title\">Visites</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Visite Commerciale')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n      <button class=\"action-btn\" onclick=\"frappe.new_doc('Visite Commerciale')\">+</button>\n    </div>\n  </div>\n\n  <!-- Carte : Réclamations -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\">\n        <path d=\"M12 7V9\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M12 13.01L12.01 12.9989\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M3 20.2895V5C3 3.89543 3.89543 3 5 3H19C20.1046 3 21 3.89543 21 5V15C21 16.1046 20.1046 17 19 17H7.96125C7.35368 17 6.77906 17.2762 6.39951 17.7506L4.06852 20.6643C3.71421 21.1072 3 20.8567 3 20.2895Z\" stroke=\"#000000\" stroke-width=\"1.5\"></path>\n      </svg>\n    </div>\n    <div class=\"card-title\">Réclamations</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Reclamations Clients')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n      <button class=\"action-btn\" onclick=\"frappe.new_doc('Reclamations Clients')\">+</button>\n    </div>\n  </div>\n\n  <!-- Carte : Demande Faisabilité -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\">\n        <path d=\"M12.4961 19.7165L18.4961 16.2879C18.8077 16.1099 19 15.7785 19 15.4197V9.58032C19 9.22147 18.8077 8.89012 18.4961 8.71208L12.4961 5.28351C12.1887 5.10783 11.8113 5.10783 11.5039 5.28351L5.50386 8.71208C5.19229 8.89012 5 9.22147 5 9.58032V15.4197C5 15.7785 5.19229 16.1099 5.50386 16.2879L11.5039 19.7165C11.8113 19.8922 12.1887 19.8922 12.4961 19.7165Z\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M5.5 9.5L12 13M12 13L18.5 9.5M12 13V19.5\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M3 3.01013L3.01 2.99902\" stroke=\"#000000\"></path>\n        <path d=\"M3 21.0101L3.01 20.999\" stroke=\"#000000\"></path>\n        <path d=\"M21 3.01013L21.01 2.99902\" stroke=\"#000000\"></path>\n        <path d=\"M21 21.0101L21.01 20.999\" stroke=\"#000000\"></path>\n      </svg>\n    </div>\n    <div class=\"card-title\">Demande Faisabilité</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Demande Faisabilite')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n      <button class=\"action-btn\" onclick=\"frappe.new_doc('Demande Faisabilite')\">+</button>\n    </div>\n  </div>\n\n  <!-- Carte : Étude Faisabilité -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\">\n        <path d=\"M3 21V3.6C3 3.26863 3.26863 3 3.6 3H21\" stroke=\"#000000\"></path>\n        <path d=\"M17 21H20.4C20.7314 21 21 20.7314 21 20.4V17\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M21 7V9\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M21 12V14\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M7 21H9\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M12 21H14\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M3 4C3.55228 4 4 3.55228 4 3C4 2.44772 3.55228 2 3 2C2.44772 2 2 2.44772 2 3C2 3.55228 2.44772 4 3 4Z\" fill=\"#000000\" stroke=\"#000000\"></path>\n        <path d=\"M3 22C3.55228 22 4 21.5523 4 21C4 20.4477 3.55228 20 3 20C2.44772 20 2 20.4477 2 21C2 21.5523 2.44772 22 3 22Z\" fill=\"#000000\" stroke=\"#000000\"></path>\n        <path d=\"M21 4C21.5523 4 22 3.55228 22 3C22 2.44772 21.5523 2 21 2C20.4477 2 20 2.44772 20 3C20 3.55228 20.4477 4 21 4Z\" fill=\"#000000\" stroke=\"#000000\"></path>\n      </svg>\n    </div>\n    <div class=\"card-title\">Étude Faisabilité</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Etude Faisabilite')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n    </div>\n  </div>\n\n  <!-- Carte : Devis -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\">\n        <path d=\"M8 14L16 14\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M8 10L10 10\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M8 18L12 18\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M10 3H6C4.89543 3 4 3.89543 4 5V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V5C20 3.89543 19.1046 3 18 3H14.5M10 3V1M10 3V5\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n      </svg>\n    </div>\n    <div class=\"card-title\">Devis</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Quotation')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n    </div>\n  </div>\n\n  <!-- Carte : Commande -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\">\n        <path d=\"M3 6H22L19 16H6L3 6ZM3 6L2.25 3.5\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M11 19.5C11 20.3284 10.3284 21 9.5 21C8.67157 21 8 20.3284 8 19.5\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M17 19.5C17 20.3284 16.3284 21 15.5 21C14.6716 21 14 20.3284 14 19.5\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n      </svg>\n    </div>\n    <div class=\"card-title\">Commande</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Sales Order')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n    </div>\n  </div>\n\n  <!-- Carte : Étude Technique -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\">\n        <path d=\"M12 17C12.5523 17 13 16.5523 13 16C13 15.4477 12.5523 15 12 15C11.4477 15 11 15.4477 11 16C11 16.5523 11.4477 17 12 17Z\" fill=\"#000000\" stroke=\"#000000\"></path>\n        <path d=\"M21 7.35304L21 16.647C21 16.8649 20.8819 17.0656 20.6914 17.1715L12.2914 21.8381C12.1102 21.9388 11.8898 21.9388 11.7086 21.8381L3.30861 17.1715C3.11814 17.0656 3 16.8649 3 16.647L2.99998 7.35304C2.99998 7.13514 3.11812 6.93437 3.3086 6.82855L11.7086 2.16188C11.8898 2.06121 12.1102 2.06121 12.2914 2.16188L20.6914 6.82855C20.8818 6.93437 21 7.13514 21 7.35304Z\" stroke=\"#000000\"></path>\n        <path d=\"M20.5 16.7222L12.2914 12.1618C12.1102 12.0612 11.8898 12.0612 11.7086 12.1618L3.5 16.7222\"\n stroke=\"#000000\"></path>\n        <path d=\"M3.52844 7.29363L11.7086 11.8382C11.8898 11.9388 12.1102 11.9388 12.2914 11.8382L20.5 7.27783\" stroke=\"#000000\"></path>\n        <path d=\"M12 3L12 12\" stroke=\"#000000\"></path>\n        <path d=\"M12 19.5V22\" stroke=\"#000000\"></path>\n      </svg>\n    </div>\n    <div class=\"card-title\">Étude Technique</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Etude Technique')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n    </div>\n  </div>\n</div>\n",
  "modified": "2025-04-23 20:41:30.383686",
  "name": "Actions Rapides - Accueil",
  "private": 0,
  "roles": [],
  "script": "// Vérifie si root_element est disponible (fourni par Frappe pour le conteneur du bloc)\nif (root_element) {\n\n  // Fonction pour traiter les cartes et ajouter les badges de comptage\n  const processCards = (container) => {\n    const cards = container.querySelectorAll(\".home-card\");\n    if (cards.length === 0) {\n      return false; // Cartes non prêtes\n    }\n\n    // Supprimé : const colors = [\"badge-info\", \"badge-success\", \"badge-warning\", \"badge-danger\"];\n    // Supprimé : let idx = 0;\n\n    cards.forEach(card => {\n      const btn = card.querySelector(\".card-actions button[onclick*=\\\"List\\\"]\");\n      if (!btn) return;\n\n      const onclickAttr = btn.getAttribute(\"onclick\");\n      const m = onclickAttr.match(/frappe\\.set_route\\(\\s*['\"]List['\"]\\s*,\\s*['\"]([^'\"]+)['\"]\\s*\\)/);\n      if (!m || m.length < 2) return;\n\n      const doctype = m[1];\n      const title = card.querySelector(\".card-title\");\n      if (!title) return;\n\n      // Vérifie si un badge existe déjà\n      if (title.querySelector('.badge')) {\n          return;\n      }\n\n      // Supprimé : const color = colors[idx++ % colors.length];\n\n      // Appel Frappe pour obtenir le nombre via la fonction Python personnalisée\n      frappe.call({\n        method: \"aurescrm.home_badges.get_doctype_count\", // Chemin vers votre fonction Python\n        args: {\n            doctype_name: doctype // Nom de l'argument attendu par la fonction Python\n        },\n        type: \"GET\", // Important: Utiliser GET pour contourner l'erreur 417\n        callback(r) {\n          if (r && r.message !== undefined) {\n            const count = r.message; // Le compte est directement dans r.message\n            const span = document.createElement(\"span\");\n            // Modifié : Applique la classe CSS personnalisée fixe\n            span.className = 'badge badge-custom-count';\n            span.style.marginLeft = \"0.5rem\";\n            span.textContent = count;\n            title.appendChild(span);\n          } else {\n            console.error(`Réponse invalide lors du comptage de ${doctype} via get_doctype_count:`, r);\n          }\n        },\n        error(err) {\n            // Log plus détaillé de l'erreur\n            console.error(`Échec de l'appel get_doctype_count pour ${doctype}:`, err.message || err);\n        }\n      });\n    });\n    return true; // Cartes traitées\n  };\n\n  // Logique d'observation (MutationObserver) et exécution initiale\n  if (!processCards(root_element)) {\n    const obs = new MutationObserver((mutations, observer) => {\n      if (root_element.querySelectorAll(\".home-card\").length) {\n        if (processCards(root_element)) {\n            observer.disconnect();\n        }\n      }\n    });\n    obs.observe(root_element, { childList: true, subtree: true });\n\n    setTimeout(() => {\n        if (root_element.querySelectorAll(\".home-card\").length && !root_element.querySelector(\".home-card .card-title .badge\")) {\n             if(processCards(root_element)) {\n                 obs.disconnect();\n             }\n        }\n    }, 3000);\n  }\n\n} else {\n  console.error(\"Erreur Bloc HTML Personnalisé : 'root_element' n'a pas été trouvé.\");\n}",
  "style": "/* \n  Container principal :\n  - 4 colonnes par défaut (grands écrans)\n  - 2 colonnes si < 1024px\n  - 1 colonne si < 768px\n*/\n.home-cards-container {\n  width: 100%;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 1rem;\n  font-family: \"Inter\", sans-serif;\n}\n\n/* Si vous voulez cibler spécifiquement le deuxième conteneur : */\n/* .home-cards-container:nth-of-type(2) {\n  grid-template-columns: repeat(4, 1fr);\n} */\n\n/* Force chaque carte à remplir sa colonne */\n.home-cards-container .home-card {\n  width: 100%;\n  box-sizing: border-box;\n}\n\n/* Carte individuelle */\n.home-card {\n  border: 1px solid var(--gray-200, #e5e7eb);\n  border-radius: 0.5rem;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 0.5rem 1rem;\n  background-color: #fff;\n}\n\n/* Titre */\n.card-title {\n  font-size: 0.7rem;\n  font-weight: 500;\n  margin: 0;\n}\n\n/* Cercle (pour l'icône) */\n.icon-circle {\n  width: 1.6rem;\n  height: 1.6rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 0.5rem;\n  color: var(--gray-800, #1f2937);\n  font-size: 0.8rem;\n}\n\n/* Boutons alignés à droite dans la carte */\n.card-actions {\n  margin-left: auto;\n  display: flex;\n  gap: 0.5rem;\n}\n\n/* Boutons (même taille que le cercle) */\n.action-btn {\n  width: 1.6rem;\n  height: 1.6rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid var(--gray-200, #e5e7eb);\n  border-radius: 0.5rem;\n  cursor: pointer;\n  color: var(--gray-700, #374151);\n  transition: background-color 0.2s;\n  font-size: 1rem;\n  line-height: 1;\n  background: #fff;\n}\n\n.action-btn:hover {\n  background-color: var(--gray-100, #f3f4f6);\n}\n\n/* TABLETTE : < 1024px => 2 colonnes */\n@media (max-width: 1024px) {\n  .home-cards-container {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n/* MOBILE : < 768px => 1 colonne */\n@media (max-width: 768px) {\n  .home-cards-container {\n    grid-template-columns: 1fr;\n  }\n}\n\n.badge {\n  display: inline-block;\n  padding: 0.2em 0.6em;\n  font-size: 0.9em;\n  font-weight: 500;\n  border-radius: 0.25rem;\n  color: #fff;\n}\n.badge-info    { background-color: #3b82f6; }\n.badge-success { background-color: #10b981; }\n.badge-warning { background-color: #f59e0b; }\n.badge-danger  { background-color: #ef4444; }\n\n.badge-custom-count {\n  background-color: #e7f1ff; /* Un bleu très clair, similaire à l'image */\n  color: #0a58ca; /* Couleur de texte contrastée (bleu foncé) */\n  padding: 0.3em 0.5em; /* Ajustement léger du padding si nécessaire */\n  font-weight: 600; /* Rendre le texte un peu plus gras */\n  vertical-align: middle; /* Meilleur alignement vertical avec le titre */\n}\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div class=\"home-cards-container\">\n  <!-- Carte : Clients -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <!-- Icône Font Awesome : utilisateurs -->\n    <svg width=\"16px\" height=\"16px\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\"><path d=\"M5 20V19C5 15.134 8.13401 12 12 12V12C15.866 12 19 15.134 19 19V20\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M12 12C14.2091 12 16 10.2091 16 8C16 5.79086 14.2091 4 12 4C9.79086 4 8 5.79086 8 8C8 10.2091 9.79086 12 12 12Z\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></svg>\n    </div>\n    <div class=\"card-title\">Clients</div>\n    <div class=\"card-actions\">\n      <!-- Bouton “Aller à la liste” : ta flèche SVG -->\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Customer')\">\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"16\"\n          height=\"16\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          stroke-width=\"2\"\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n        >\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n      <!-- Bouton “Nouveau doc” -->\n      <button\n        class=\"action-btn\"\n        onclick=\"frappe.new_doc('Customer')\"\n      >\n        +\n      </button>\n    </div>\n  </div>\n\n  <!-- Carte : Articles -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <!-- Icône Font Awesome : cube -->\n    <svg width=\"16px\" height=\"16px\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\"><path d=\"M2.6954 7.18536L11.6954 11.1854L12.3046 9.81464L3.3046 5.81464L2.6954 7.18536ZM12.75 21.5V10.5H11.25V21.5H12.75ZM12.3046 11.1854L21.3046 7.18536L20.6954 5.81464L11.6954 9.81464L12.3046 11.1854Z\" fill=\"#000000\"></path><path d=\"M3 17.1101V6.88992C3 6.65281 3.13964 6.43794 3.35632 6.34164L11.7563 2.6083C11.9115 2.53935 12.0885 2.53935 12.2437 2.6083L20.6437 6.34164C20.8604 6.43794 21 6.65281 21 6.88992V17.1101C21 17.3472 20.8604 17.5621 20.6437 17.6584L12.2437 21.3917C12.0885 21.4606 11.9115 21.4606 11.7563 21.3917L3.35632 17.6584C3.13964 17.5621 3 17.3472 3 17.1101Z\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M7.5 4.5L16.1437 8.34164C16.3604 8.43794 16.5 8.65281 16.5 8.88992V12.5\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></svg>  \n    </div>\n    <div class=\"card-title\">Articles</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Item')\">\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"16\"\n          height=\"16\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          stroke-width=\"2\"\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n        >\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n      <button\n        class=\"action-btn\"\n        onclick=\"frappe.new_doc('Item')\"\n      >\n        +\n      </button>\n    </div>\n  </div>\n\n  <!-- Carte : Visites -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <!-- Icône Font Awesome : voiture -->\n    <svg width=\"16px\" height=\"16px\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\"><path d=\"M5 15L5.95039 4.54568C5.97849 4.23663 6.23761 4 6.54793 4H20.343C20.6958 4 20.9725 4.30295 20.9405 4.65432L20.0496 14.4543C20.0215 14.7634 19.7624 15 19.4521 15H5ZM5 15L4.4 21\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M9 7.5L16 11.5\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></svg>\n    </div>\n    <div class=\"card-title\">Visites</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Visite Commerciale')\">\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"16\"\n          height=\"16\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          stroke-width=\"2\"\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n        >\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n      <button\n        class=\"action-btn\"\n        onclick=\"frappe.new_doc('Visite Commerciale')\"\n      >\n        +\n      </button>\n    </div>\n  </div>\n\n  <!-- Carte : Rendez Vous -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <!-- Icône Font Awesome : calendrier -->\n    <svg width=\"16px\" height=\"16px\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\"><path d=\"M12 7V9\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M12 13.01L12.01 12.9989\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M3 20.2895V5C3 3.89543 3.89543 3 5 3H19C20.1046 3 21 3.89543 21 5V15C21 16.1046 20.1046 17 19 17H7.96125C7.35368 17 6.77906 17.2762 6.39951 17.7506L4.06852 20.6643C3.71421 21.1072 3 20.8567 3 20.2895Z\" stroke=\"#000000\" stroke-width=\"1.5\"></path></svg>\n    </div>\n    <div class=\"card-title\">Réclamations</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Reclamations Clients')\">\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"16\"\n          height=\"16\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          stroke-width=\"2\"\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n        >\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n      <button\n        class=\"action-btn\"\n        onclick=\"frappe.new_doc('Reclamations Clients')\"\n      >\n        +\n      </button>\n    </div>\n  </div>\n</div>\n",
  "modified": "2025-02-22 22:56:08.727502",
  "name": "Actions Rapides - Commercial",
  "private": 0,
  "roles": [],
  "script": "",
  "style": "/* \n  Container principal :\n  - 4 colonnes par défaut (grands écrans)\n  - 2 colonnes si < 1024px\n  - 1 colonne si < 768px\n*/\n.home-cards-container {\n  width: 100%;\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 1rem;\n  font-family: \"Inter\", sans-serif;\n}\n\n/* Carte individuelle */\n.home-card {\n  /* la classe border + bg-light sont définies directement sur .icon-circle,\n     donc ici on ne force pas de couleur */\n  border: 1px solid var(--gray-200, #e5e7eb);\n  border-radius: 0.5rem;\n  display: flex;        /* Aligner icône, titre, boutons sur la même ligne */\n  align-items: center;\n  gap: 1rem;\n  padding: 0.5rem 1rem;\n  background-color: #fff;\n}\n\n/* Titre */\n.card-title {\n  font-size: 0.7rem;\n  font-weight: 500;\n  margin: 0;\n}\n\n/*\n  Cercle (pour l'icône) :\n  - On laisse la classe border + bg-light dans le HTML\n  - Dimensions identiques aux .action-btn\n*/\n.icon-circle {\n  width: 1.6rem;\n  height: 1.6rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 0.5rem;\n\n  /* Couleur du texte (icône) */\n  color: var(--gray-800, #1f2937);\n  font-size: 0.8rem;\n}\n\n/* Boutons alignés à droite dans la carte */\n.card-actions {\n  margin-left: auto;\n  display: flex;\n  gap: 0.5rem;\n}\n\n/* Boutons (même taille que le cercle) */\n.action-btn {\n  width: 1.6rem;\n  height: 1.6rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid var(--gray-200, #e5e7eb);\n  border-radius: 0.5rem;\n  cursor: pointer;\n  color: var(--gray-700, #374151);\n  transition: background-color 0.2s;\n  font-size: 1rem; /* taille du +, et la flèche SVG est en 16x16 */\n  line-height: 1;\n  background: #fff;\n}\n\n.action-btn:hover {\n  background-color: var(--gray-100, #f3f4f6);\n}\n\n/* \n  TABLETTE :\n  - < 1024px => 2 colonnes\n*/\n@media (max-width: 1024px) {\n  .home-cards-container {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n/* \n  MOBILE :\n  - < 768px => 1 colonne => cartes empilées\n*/\n@media (max-width: 768px) {\n  .home-cards-container {\n    grid-template-columns: 1fr;\n  }\n}\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div class=\"home-cards-container\">\n\n  <!-- Carte : Clients -->\n  <div class=\"home-card\">\n    <!-- Cercle pour le compteur -->\n    <div class=\"count-circle circle-customer\">\n      <span id=\"count-customer\">0</span>\n    </div>\n    <!-- Titre -->\n    <div class=\"card-title\">Clients</div>\n    <!-- Boutons -->\n    <div class=\"card-actions\">\n      <button\n  class=\"action-btn\"\n  onclick=\"frappe.set_route('List', 'Customer')\"\n>\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    stroke-width=\"2\"\n    stroke-linecap=\"round\"\n    stroke-linejoin=\"round\"\n  >\n    <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n    <polyline points=\"7 7 17 7 17 17\"></polyline>\n  </svg>\n</button>\n      <button\n        class=\"action-btn\"\n        onclick=\"frappe.new_doc('Customer')\"\n      >\n        +\n      </button>\n    </div>\n  </div>\n\n  <!-- Carte : Articles -->\n  <div class=\"home-card\">\n    <div class=\"count-circle circle-item\">\n      <span id=\"count-item\">0</span>\n    </div>\n    <div class=\"card-title\">Articles</div>\n    <div class=\"card-actions\">\n      <button\n  class=\"action-btn\"\n  onclick=\"frappe.set_route('List', 'Item')\"\n>\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    stroke-width=\"2\"\n    stroke-linecap=\"round\"\n    stroke-linejoin=\"round\"\n  >\n    <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n    <polyline points=\"7 7 17 7 17 17\"></polyline>\n  </svg>\n</button>\n      <button\n        class=\"action-btn\"\n        onclick=\"frappe.new_doc('Item')\"\n      >\n        +\n      </button>\n    </div>\n  </div>\n\n  <!-- Carte : Visite Commerciale -->\n  <div class=\"home-card\">\n    <div class=\"count-circle circle-visite\">\n      <span id=\"count-visite\">0</span>\n    </div>\n    <div class=\"card-title\">Visites</div>\n    <div class=\"card-actions\">\n      <button\n  class=\"action-btn\"\n  onclick=\"frappe.set_route('List', 'Visite Commerciale')\"\n>\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    stroke-width=\"2\"\n    stroke-linecap=\"round\"\n    stroke-linejoin=\"round\"\n  >\n    <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n    <polyline points=\"7 7 17 7 17 17\"></polyline>\n  </svg>\n</button>\n      <button\n        class=\"action-btn\"\n        onclick=\"frappe.new_doc('Visite Commerciale')\"\n      >\n        +\n      </button>\n    </div>\n  </div>\n\n  <!-- Carte : Rendez Vous Client -->\n  <div class=\"home-card\">\n    <div class=\"count-circle circle-rdv\">\n      <span id=\"count-rdv\">0</span>\n    </div>\n    <div class=\"card-title\">Rendez Vous</div>\n    <div class=\"card-actions\">\n      <button\n  class=\"action-btn\"\n  onclick=\"frappe.set_route('List', 'Rendez Vous Client')\"\n>\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    stroke-width=\"2\"\n    stroke-linecap=\"round\"\n    stroke-linejoin=\"round\"\n  >\n    <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n    <polyline points=\"7 7 17 7 17 17\"></polyline>\n  </svg>\n</button>\n      <button\n        class=\"action-btn\"\n        onclick=\"frappe.new_doc('Rendez Vous Client')\"\n      >\n        +\n      </button>\n    </div>\n  </div>\n\n</div>\n",
  "modified": "2025-02-20 14:41:59.801575",
  "name": "Boutons Accueil - Commercial",
  "private": 0,
  "roles": [],
  "script": "/**\n * Exemple complet utilisant root_element pour le Shadow DOM.\n * Si votre Custom HTML Block est rendu via un moteur de template,\n * vous ne pouvez pas directement faire document.getElementById(...)\n * \n * On appelle frappe.client.get_count pour chaque Doctype\n * et on met à jour le texte dans le <span> correspondant.\n */\n\nfrappe.call({\n  method: \"frappe.client.get_count\",\n  args: { doctype: \"Rendez Vous Client\" },\n  callback: function (r) {\n    let el = root_element.querySelector(\"#count-rdv\");\n    if (el && r.message !== undefined) {\n      el.innerText = r.message;\n    }\n  },\n});\n\nfrappe.call({\n  method: \"frappe.client.get_count\",\n  args: { doctype: \"Visite Commerciale\" },\n  callback: function (r) {\n    let el = root_element.querySelector(\"#count-visite\");\n    if (el && r.message !== undefined) {\n      el.innerText = r.message;\n    }\n  },\n});\n\nfrappe.call({\n  method: \"frappe.client.get_count\",\n  args: { doctype: \"Customer\" },\n  callback: function (r) {\n    let el = root_element.querySelector(\"#count-customer\");\n    if (el && r.message !== undefined) {\n      el.innerText = r.message;\n    }\n  },\n});\n\nfrappe.call({\n  method: \"frappe.client.get_count\",\n  args: { doctype: \"Item\" },\n  callback: function (r) {\n    let el = root_element.querySelector(\"#count-item\");\n    if (el && r.message !== undefined) {\n      el.innerText = r.message;\n    }\n  },\n});\n",
  "style": "/* \n  Container principal :\n  - 4 colonnes par défaut (grands écrans)\n  - 2 colonnes si < 1024px\n  - 1 colonne si < 768px\n*/\n.home-cards-container {\n  width: 100%;\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 1rem;\n  font-family: \"Inter\", sans-serif;\n}\n\n/* Carte individuelle */\n.home-card {\n  border: 0.8px solid #e5e7eb;\n  border-radius: 0.5rem;\n  display: flex;        /* aligner compteur / titre / boutons sur une ligne */\n  align-items: center;\n  gap: 1rem;\n  padding: 0.5rem 1rem;\n  background-color: #fff;\n}\n\n/* Titre */\n.card-title {\n  font-size: 0.7rem;\n  font-weight: 500;\n  margin: 0;\n}\n\n/* \n  Compteur (même forme que les boutons) \n  - Dimensions identiques aux .action-btn\n  - Bord arrondi : 0.5rem\n*/\n.count-circle {\n  width: 1.6rem;\n  height: 1.6rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 0.5px solid #e5e7eb;\n  border-radius: 0.5rem;\n\n  /* Couleur du texte, taille, etc. */\n  color: #1f2937;\n  font-weight: 600;\n  font-size: 0.7rem;\n}\n\n/* Couleurs spécifiques (50% d’opacité) */\n.circle-rdv {\n  background-color: #f0f3bd80; /* ex: #aed9e0 */\n}\n.circle-visite {\n  background-color: #eaac8b80; /* ex: #b8f2e6 */\n}\n.circle-customer {\n  background-color: #70c1b360; /* ex: #faf3dd */\n}\n.circle-item {\n  background-color: #a8dadc80; /* ex: #ffa69e */\n}\n\n/* Boutons alignés à droite dans la carte */\n.card-actions {\n  margin-left: auto;\n  display: flex;\n  gap: 0.5rem;\n}\n\n/* Boutons identiques, même taille */\n.action-btn {\n  width: 1.6rem;\n  height: 1.6rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #fff;\n  border: 1px solid #e5e7eb;\n  border-radius: 0.5rem;\n  cursor: pointer;\n  color: #374151;\n  transition: background-color 0.2s;\n  font-size: 1rem;\n  line-height: 1;\n}\n\n.action-btn:hover {\n  background-color: #f3f4f6;\n}\n\n/* \n  TABLETTE : \n  - < 1024px => 2 colonnes (évite trop de compression pour 4 cartes) \n*/\n@media (max-width: 1024px) {\n  .home-cards-container {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n/* \n  MOBILE :\n  - < 768px => 1 colonne => cartes empilées \n*/\n@media (max-width: 768px) {\n  .home-cards-container {\n    grid-template-columns: 1fr;\n  }\n}\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div id=\"customer-list\"></div>\n",
  "modified": "2025-02-21 12:58:25.842521",
  "name": "Liste Clients",
  "private": 0,
  "roles": [],
  "script": "frappe.call({\n    method: \"frappe.client.get_list\",\n    args: {\n        doctype: \"Customer\",\n        fields: [\"name\", \"customer_name\", \"custom_status\", \"custom_wilaya\", \"modified\"],\n        order_by: \"modified desc\",\n        limit: 5\n    },\n    callback: function(r) {\n        // Utilisez root_element pour cibler l'élément\n        var customerListElement = root_element.querySelector('#customer-list');\n        if (!customerListElement) {\n            console.error('Élément #customer-list introuvable dans root_element.');\n            return;\n        }\n        if (r.message && r.message.length > 0) {\n            var customers = r.message.slice(0, 5);\n            var html = '<div id=\"customers-table-container\">';\n            html += '<table id=\"customers-table\">';\n            html += '<thead><tr>';\n            html += '<th>Nom du Client</th>';\n            html += '<th>Statut</th>';\n            html += '<th>Wilaya</th>';\n            html += '<th>Dernière Interaction</th>';\n            html += '</tr></thead><tbody>';\n            customers.forEach(function(customer) {\n                // Détermine la couleur basée sur le statut\n                var statusColor = '';\n                switch (customer.custom_status) {\n                    case 'Prospect':\n                        statusColor = 'color: #219ebc;';\n                        break;\n                    case 'Actif':\n                        statusColor = 'color: #2a9d8f;';\n                        break;\n                    case 'Dormant':\n                        statusColor = 'color: #e76f51;';\n                        break;\n                    case 'Perdu':\n                        statusColor = 'color: red;';\n                        break;\n                    case 'Exclu':\n                        statusColor = 'color: #6c757d;';\n                        break;\n                    default:\n                        statusColor = 'color: black;';\n                }\n\n                // Formate la date pour une meilleure lisibilité\n                var formattedDate = formatDate(customer.modified);\n\n                // Ajoute une ligne cliquable avec l'URL du client\n                html += `\n                    <tr class=\"clickable-row\" onclick=\"frappe.set_route('Form', 'Customer', '${customer.name}')\">\n                        <td>${customer.customer_name || '-'}</td>\n                        <td style=\"${statusColor}\">${customer.custom_status || '-'}</td>\n                        <td>${customer.custom_wilaya || '-'}</td>\n                        <td>${formattedDate || '-'}</td>\n                    </tr>\n                `;\n            });\n            html += '</tbody></table></div>';\n            customerListElement.innerHTML = html;\n        } else {\n            customerListElement.innerHTML = 'Aucun client trouvé.';\n        }\n    },\n    error: function(err) {\n        var customerListElement = root_element.querySelector('#customer-list');\n        if (customerListElement) {\n            customerListElement.innerHTML = 'Erreur lors du chargement des données.';\n        }\n        console.error('Erreur lors du chargement des données :', err);\n    }\n});\n\n// Fonction pour reformater une date au format DD/MM/YYYY HH:MM\nfunction formatDate(dateString) {\n    if (!dateString) return '';\n    var date = new Date(dateString);\n    var day = String(date.getDate()).padStart(2, '0');\n    var month = String(date.getMonth() + 1).padStart(2, '0'); // Les mois commencent à 0\n    var year = date.getFullYear();\n    var hours = String(date.getHours()).padStart(2, '0');\n    var minutes = String(date.getMinutes()).padStart(2, '0');\n    return `${day}/${month}/${year} ${hours}:${minutes}`;\n}\n",
  "style": "#customers-table-container {\n    overflow-x: auto; /* Scroll horizontal si nécessaire */\n    margin-bottom: 15px; /* Espace pour un affichage propre */\n}\n\n#customers-table {\n    border-collapse: separate; /* Permet d'appliquer des bordures arrondies */\n    border-spacing: 0; /* Pas d'espace entre les cellules */\n    width: 100%;\n    border: 0.5px solid rgba(211, 211, 211, 0.6); /* Bordure fine en couleur claire */\n    border-radius: 8px; /* Coins arrondis */\n    overflow: hidden; /* S'assure que les coins arrondis s'appliquent correctement */\n    font-size: 12px;\n}\n\n#customers-table th,\n#customers-table td {\n    border: 0.5px solid rgba(211, 211, 211, 0.6); /* Bordure fine autour des cellules */\n    padding: 8px;\n    text-align: center;\n}\n\n#customers-table th {\n    background-color: #f9f9f9; /* Fond clair pour l'en-tête */\n    font-weight: bold; /* Texte en gras */\n}\n\n#customers-table tbody tr:hover {\n    background-color: #f2f2f2; /* Fond léger au survol */\n}\n\n/* Coins arrondis spécifiques */\n#customers-table thead tr:first-child th:first-child {\n    border-top-left-radius: 8px; /* Coin en haut à gauche */\n}\n\n#customers-table thead tr:first-child th:last-child {\n    border-top-right-radius: 8px; /* Coin en haut à droite */\n}\n\n#customers-table tbody tr:last-child td:first-child {\n    border-bottom-left-radius: 8px; /* Coin en bas à gauche */\n}\n\n#customers-table tbody tr:last-child td:last-child {\n    border-bottom-right-radius: 8px; /* Coin en bas à droite */\n}\n\n/* Style pour les lignes cliquables */\n.clickable-row {\n    cursor: pointer; /* Change le curseur pour indiquer que la ligne est cliquable */\n    transition: background-color 0.3s; /* Ajoute une transition pour l'effet de survol */\n}\n\n.clickable-row:hover {\n    background-color: #f2f2f2; /* Change le fond au survol */\n}\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div class=\"section-box\"\n     style=\"background:#f8f9fa;\n            border:0.5px solid #dee2e6;\n            border-radius:8px;\n            padding:14px;\">\n\n<!-- Titre de la section -->\n<h3 class=\"section-title\"\n    style=\"\n      font-size:12px;\n      font-weight:600;\n      margin:0 0 14px;\n      display:flex;          /* met l’icône et le texte côte à côte */\n      align-items:center;    /* centre verticalement */\n      gap:6px;               /* espace entre l’icône et le texte */\n    \">\n<svg width=\"14px\" height=\"14px\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\"><path d=\"M5.5 6C5.77614 6 6 5.77614 6 5.5C6 5.22386 5.77614 5 5.5 5C5.22386 5 5 5.22386 5 5.5C5 5.77614 5.22386 6 5.5 6Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M5.5 12.5C5.77614 12.5 6 12.2761 6 12C6 11.7239 5.77614 11.5 5.5 11.5C5.22386 11.5 5 11.7239 5 12C5 12.2761 5.22386 12.5 5.5 12.5Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M5.5 19C5.77614 19 6 18.7761 6 18.5C6 18.2239 5.77614 18 5.5 18C5.22386 18 5 18.2239 5 18.5C5 18.7761 5.22386 19 5.5 19Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M12 6C12.2761 6 12.5 5.77614 12.5 5.5C12.5 5.22386 12.2761 5 12 5C11.7239 5 11.5 5.22386 11.5 5.5C11.5 5.77614 11.7239 6 12 6Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M12 12.5C12.2761 12.5 12.5 12.2761 12.5 12C12.5 11.7239 12.2761 11.5 12 11.5C11.7239 11.5 11.5 11.7239 11.5 12C11.5 12.2761 11.7239 12.5 12 12.5Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M12 19C12.2761 19 12.5 18.7761 12.5 18.5C12.5 18.2239 12.2761 18 12 18C11.7239 18 11.5 18.2239 11.5 18.5C11.5 18.7761 11.7239 19 12 19Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M18.5 6C18.7761 6 19 5.77614 19 5.5C19 5.22386 18.7761 5 18.5 5C18.2239 5 18 5.22386 18 5.5C18 5.77614 18.2239 6 18.5 6Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M18.5 12.5C18.7761 12.5 19 12.2761 19 12C19 11.7239 18.7761 11.5 18.5 11.5C18.2239 11.5 18 11.7239 18 12C18 12.2761 18.2239 12.5 18.5 12.5Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M18.5 19C18.7761 19 19 18.7761 19 18.5C19 18.2239 18.7761 18 18.5 18C18.2239 18 18 18.2239 18 18.5C18 18.7761 18.2239 19 18.5 19Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></svg>\n   Menu Achats\n   \n</h3>\n\n\n<div class=\"home-cards-container\">\n  <!-- Carte : Fournisseur -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\">\n        <path d=\"M5 20V19C5 15.134 8.13401 12 12 12V12C15.866 12 19 15.134 19 19V20\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M12 12C14.2091 12 16 10.2091 16 8C16 5.79086 14.2091 4 12 4C9.79086 4 8 5.79086 8 8C8 10.2091 9.79086 12 12 12Z\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n      </svg>\n    </div>\n    <div class=\"card-title\">Fournisseur</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Supplier')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n      <button class=\"action-btn\" onclick=\"frappe.new_doc('Supplier')\">+</button>\n    </div>\n  </div>\n\n  <!-- Carte : Articles -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\">\n        <path d=\"M2.6954 7.18536L11.6954 11.1854L12.3046 9.81464L3.3046 5.81464L2.6954 7.18536ZM12.75 21.5V10.5H11.25V21.5H12.75ZM12.3046 11.1854L21.3046 7.18536L20.6954 5.81464L11.6954 9.81464L12.3046 11.1854Z\" fill=\"#000000\"></path>\n        <path d=\"M3 17.1101V6.88992C3 6.65281 3.13964 6.43794 3.35632 6.34164L11.7563 2.6083C11.9115 2.53935 12.0885 2.53935 12.2437 2.6083L20.6437 6.34164C20.8604 6.43794 21 6.65281 21 6.88992V17.1101C21 17.3472 20.8604 17.5621 20.6437 17.6584L12.2437 21.3917C12.0885 21.4606 11.9115 21.4606 11.7563 21.3917L3.35632 17.6584C3.13964 17.5621 3 17.3472 3 17.1101Z\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M7.5 4.5L16.1437 8.34164C16.3604 8.43794 16.5 8.65281 16.5 8.88992V12.5\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n      </svg>  \n    </div>\n    <div class=\"card-title\">Articles</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Item')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n      <button class=\"action-btn\" onclick=\"frappe.new_doc('Item')\">+</button>\n    </div>\n  </div>\n\n  <!-- Carte : Dossier Importation -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" stroke-width=\"1.5\" height=\"16px\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\"><path d=\"M4 19V5C4 3.89543 4.89543 3 6 3H19.4C19.7314 3 20 3.26863 20 3.6V16.7143\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\"></path><path d=\"M6 17L20 17\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\"></path><path d=\"M6 21L20 21\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\"></path><path d=\"M6 21C4.89543 21 4 20.1046 4 19C4 17.8954 4.89543 17 6 17\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M9 7L15 7\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\"></path></svg>\n    </div>\n    <div class=\"card-title\">Dossier Import</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Dossier Importation')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n      <button class=\"action-btn\" onclick=\"frappe.new_doc('Dossier Importation')\">+</button>\n    </div>\n  </div>\n\n\n\n\n  <!-- Carte : Devis Fournisseur-->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\">\n        <path d=\"M8 14L16 14\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M8 10L10 10\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M8 18L12 18\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M10 3H6C4.89543 3 4 3.89543 4 5V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V5C20 3.89543 19.1046 3 18 3H14.5M10 3V1M10 3V5\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n      </svg>\n    </div>\n    <div class=\"card-title\">Devis Fournisseur</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Supplier Quotation')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n      <button class=\"action-btn\" onclick=\"frappe.new_doc('Supplier Quotation')\">+</button>\n    </div>\n  </div>\n\n  <!-- Carte : Commande Achat-->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\">\n        <path d=\"M3 6H22L19 16H6L3 6ZM3 6L2.25 3.5\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M11 19.5C11 20.3284 10.3284 21 9.5 21C8.67157 21 8 20.3284 8 19.5\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M17 19.5C17 20.3284 16.3284 21 15.5 21C14.6716 21 14 20.3284 14 19.5\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n      </svg>\n    </div>\n    <div class=\"card-title\">Commande Achat</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Purchase Order')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n    </div>\n  </div>\n\n  <!-- Carte : Étude Technique -->\n  \n  \n</div>\n</div>",
  "modified": "2025-07-10 12:19:34.539086",
  "name": "Actions Rapides - Achats",
  "private": 0,
  "roles": [
   {
    "parent": "Actions Rapides - Achats",
    "parentfield": "roles",
    "parenttype": "Custom HTML Block",
    "role": "Purchase Manager"
   },
   {
    "parent": "Actions Rapides - Achats",
    "parentfield": "roles",
    "parenttype": "Custom HTML Block",
    "role": "Purchase User"
   }
  ],
  "script": "// Vérifie si root_element est disponible (fourni par Frappe pour le conteneur du bloc)\nif (root_element) {\n\n  // Fonction pour traiter les cartes et ajouter les badges de comptage\n  const processCards = (container) => {\n    const cards = container.querySelectorAll(\".home-card\");\n    if (cards.length === 0) {\n      return false; // Cartes non prêtes\n    }\n\n    // Supprimé : const colors = [\"badge-info\", \"badge-success\", \"badge-warning\", \"badge-danger\"];\n    // Supprimé : let idx = 0;\n\n    cards.forEach(card => {\n      const btn = card.querySelector(\".card-actions button[onclick*=\\\"List\\\"]\");\n      if (!btn) return;\n\n      const onclickAttr = btn.getAttribute(\"onclick\");\n      const m = onclickAttr.match(/frappe\\.set_route\\(\\s*['\"]List['\"]\\s*,\\s*['\"]([^'\"]+)['\"]\\s*\\)/);\n      if (!m || m.length < 2) return;\n\n      const doctype = m[1];\n      const title = card.querySelector(\".card-title\");\n      if (!title) return;\n\n      // Vérifie si un badge existe déjà\n      if (title.querySelector('.badge')) {\n          return;\n      }\n\n      // Supprimé : const color = colors[idx++ % colors.length];\n\n      // Appel Frappe pour obtenir le nombre via la fonction Python personnalisée\n      frappe.call({\n        method: \"aurescrm.home_badges.get_doctype_count\", // Chemin vers votre fonction Python\n        args: {\n            doctype_name: doctype // Nom de l'argument attendu par la fonction Python\n        },\n        type: \"GET\", // Important: Utiliser GET pour contourner l'erreur 417\n        callback(r) {\n          if (r && r.message !== undefined) {\n            const count = r.message; // Le compte est directement dans r.message\n            const span = document.createElement(\"span\");\n            // Modifié : Applique la classe CSS personnalisée fixe\n            span.className = 'badge badge-custom-count';\n            span.style.marginLeft = \"0.5rem\";\n            span.textContent = count;\n            title.appendChild(span);\n          } else {\n            console.error(`Réponse invalide lors du comptage de ${doctype} via get_doctype_count:`, r);\n          }\n        },\n        error(err) {\n            // Log plus détaillé de l'erreur\n            console.error(`Échec de l'appel get_doctype_count pour ${doctype}:`, err.message || err);\n        }\n      });\n    });\n    return true; // Cartes traitées\n  };\n\n  // Logique d'observation (MutationObserver) et exécution initiale\n  if (!processCards(root_element)) {\n    const obs = new MutationObserver((mutations, observer) => {\n      if (root_element.querySelectorAll(\".home-card\").length) {\n        if (processCards(root_element)) {\n            observer.disconnect();\n        }\n      }\n    });\n    obs.observe(root_element, { childList: true, subtree: true });\n\n    setTimeout(() => {\n        if (root_element.querySelectorAll(\".home-card\").length && !root_element.querySelector(\".home-card .card-title .badge\")) {\n             if(processCards(root_element)) {\n                 obs.disconnect();\n             }\n        }\n    }, 3000);\n  }\n\n} else {\n  console.error(\"Erreur Bloc HTML Personnalisé : 'root_element' n'a pas été trouvé.\");\n}",
  "style": "/* \n  Container principal :\n  - 4 colonnes par défaut (grands écrans)\n  - 2 colonnes si < 1024px\n  - 1 colonne si < 768px\n*/\n.home-cards-container {\n  width: 100%;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 1rem;\n  font-family: \"Inter\", sans-serif;\n}\n\n/* Si vous voulez cibler spécifiquement le deuxième conteneur : */\n/* .home-cards-container:nth-of-type(2) {\n  grid-template-columns: repeat(4, 1fr);\n} */\n\n/* Force chaque carte à remplir sa colonne */\n.home-cards-container .home-card {\n  width: 100%;\n  box-sizing: border-box;\n}\n\n/* Carte individuelle */\n.home-card {\n  border: 1px solid var(--gray-200, #e5e7eb);\n  border-radius: 0.5rem;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 0.5rem 1rem;\n  background-color: #fff;\n}\n\n/* Titre */\n.card-title {\n  font-size: 0.7rem;\n  font-weight: 500;\n  margin: 0;\n}\n\n/* Cercle (pour l'icône) */\n.icon-circle {\n  width: 1.6rem;\n  height: 1.6rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 0.5rem;\n  color: var(--gray-800, #1f2937);\n  font-size: 0.8rem;\n}\n\n/* Boutons alignés à droite dans la carte */\n.card-actions {\n  margin-left: auto;\n  display: flex;\n  gap: 0.5rem;\n}\n\n/* Boutons (même taille que le cercle) */\n.action-btn {\n  width: 1.6rem;\n  height: 1.6rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid var(--gray-200, #e5e7eb);\n  border-radius: 0.5rem;\n  cursor: pointer;\n  color: var(--gray-700, #374151);\n  transition: background-color 0.2s;\n  font-size: 1rem;\n  line-height: 1;\n  background: #fff;\n}\n\n.action-btn:hover {\n  background-color: var(--gray-100, #f3f4f6);\n}\n\n/* TABLETTE : < 1024px => 2 colonnes */\n@media (max-width: 1024px) {\n  .home-cards-container {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n/* MOBILE : < 768px => 1 colonne */\n@media (max-width: 768px) {\n  .home-cards-container {\n    grid-template-columns: 1fr;\n  }\n}\n\n.badge {\n  display: inline-block;\n  padding: 0.2em 0.6em;\n  font-size: 0.9em;\n  font-weight: 500;\n  border-radius: 0.25rem;\n  color: #fff;\n}\n.badge-info    { background-color: #3b82f6; }\n.badge-success { background-color: #10b981; }\n.badge-warning { background-color: #f59e0b; }\n.badge-danger  { background-color: #ef4444; }\n\n.badge-custom-count {\n  background-color: #e7f1ff; /* Un bleu très clair, similaire à l'image */\n  color: #0a58ca; /* Couleur de texte contrastée (bleu foncé) */\n  padding: 0.3em 0.5em; /* Ajustement léger du padding si nécessaire */\n  font-weight: 600; /* Rendre le texte un peu plus gras */\n  vertical-align: middle; /* Meilleur alignement vertical avec le titre */\n}\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div class=\"section-box\"\n     style=\"background:#f8f9fa;\n            border:0.5px solid #dee2e6;\n            border-radius:8px;\n            padding:14px;\">\n\n<!-- Titre de la section -->\n<h3 class=\"section-title\"\n    style=\"\n      font-size:12px;\n      font-weight:600;\n      margin:0 0 14px;\n      display:flex;          /* met l’icône et le texte côte à côte */\n      align-items:center;    /* centre verticalement */\n      gap:6px;               /* espace entre l’icône et le texte */\n    \">\n<svg width=\"14px\" height=\"14px\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\"><path d=\"M5.5 6C5.77614 6 6 5.77614 6 5.5C6 5.22386 5.77614 5 5.5 5C5.22386 5 5 5.22386 5 5.5C5 5.77614 5.22386 6 5.5 6Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M5.5 12.5C5.77614 12.5 6 12.2761 6 12C6 11.7239 5.77614 11.5 5.5 11.5C5.22386 11.5 5 11.7239 5 12C5 12.2761 5.22386 12.5 5.5 12.5Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M5.5 19C5.77614 19 6 18.7761 6 18.5C6 18.2239 5.77614 18 5.5 18C5.22386 18 5 18.2239 5 18.5C5 18.7761 5.22386 19 5.5 19Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M12 6C12.2761 6 12.5 5.77614 12.5 5.5C12.5 5.22386 12.2761 5 12 5C11.7239 5 11.5 5.22386 11.5 5.5C11.5 5.77614 11.7239 6 12 6Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M12 12.5C12.2761 12.5 12.5 12.2761 12.5 12C12.5 11.7239 12.2761 11.5 12 11.5C11.7239 11.5 11.5 11.7239 11.5 12C11.5 12.2761 11.7239 12.5 12 12.5Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M12 19C12.2761 19 12.5 18.7761 12.5 18.5C12.5 18.2239 12.2761 18 12 18C11.7239 18 11.5 18.2239 11.5 18.5C11.5 18.7761 11.7239 19 12 19Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M18.5 6C18.7761 6 19 5.77614 19 5.5C19 5.22386 18.7761 5 18.5 5C18.2239 5 18 5.22386 18 5.5C18 5.77614 18.2239 6 18.5 6Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M18.5 12.5C18.7761 12.5 19 12.2761 19 12C19 11.7239 18.7761 11.5 18.5 11.5C18.2239 11.5 18 11.7239 18 12C18 12.2761 18.2239 12.5 18.5 12.5Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M18.5 19C18.7761 19 19 18.7761 19 18.5C19 18.2239 18.7761 18 18.5 18C18.2239 18 18 18.2239 18 18.5C18 18.7761 18.2239 19 18.5 19Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></svg>\n   Menu Commercial\n   \n</h3>\n\n\n<div class=\"home-cards-container\">\n  <!-- Carte : Clients -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\">\n        <path d=\"M5 20V19C5 15.134 8.13401 12 12 12V12C15.866 12 19 15.134 19 19V20\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M12 12C14.2091 12 16 10.2091 16 8C16 5.79086 14.2091 4 12 4C9.79086 4 8 5.79086 8 8C8 10.2091 9.79086 12 12 12Z\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n      </svg>\n    </div>\n    <div class=\"card-title\">Clients</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Customer')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n      <button class=\"action-btn\" onclick=\"frappe.new_doc('Customer')\">+</button>\n    </div>\n  </div>\n\n  <!-- Carte : Articles -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\">\n        <path d=\"M2.6954 7.18536L11.6954 11.1854L12.3046 9.81464L3.3046 5.81464L2.6954 7.18536ZM12.75 21.5V10.5H11.25V21.5H12.75ZM12.3046 11.1854L21.3046 7.18536L20.6954 5.81464L11.6954 9.81464L12.3046 11.1854Z\" fill=\"#000000\"></path>\n        <path d=\"M3 17.1101V6.88992C3 6.65281 3.13964 6.43794 3.35632 6.34164L11.7563 2.6083C11.9115 2.53935 12.0885 2.53935 12.2437 2.6083L20.6437 6.34164C20.8604 6.43794 21 6.65281 21 6.88992V17.1101C21 17.3472 20.8604 17.5621 20.6437 17.6584L12.2437 21.3917C12.0885 21.4606 11.9115 21.4606 11.7563 21.3917L3.35632 17.6584C3.13964 17.5621 3 17.3472 3 17.1101Z\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M7.5 4.5L16.1437 8.34164C16.3604 8.43794 16.5 8.65281 16.5 8.88992V12.5\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n      </svg>  \n    </div>\n    <div class=\"card-title\">Articles</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Item')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n      <button class=\"action-btn\" onclick=\"frappe.new_doc('Item')\">+</button>\n    </div>\n  </div>\n\n  <!-- Carte : Visites -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\">\n        <path d=\"M5 15L5.95039 4.54568C5.97849 4.23663 6.23761 4 6.54793 4H20.343C20.6958 4 20.9725 4.30295 20.9405 4.65432L20.0496 14.4543C20.0215 14.7634 19.7624 15 19.4521 15H5ZM5 15L4.4 21\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M9 7.5L16 11.5\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n      </svg>\n    </div>\n    <div class=\"card-title\">Visites</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Visite Commerciale')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n      <button class=\"action-btn\" onclick=\"frappe.new_doc('Visite Commerciale')\">+</button>\n    </div>\n  </div>\n\n  <!-- Carte : Réclamations -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\">\n        <path d=\"M12 7V9\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M12 13.01L12.01 12.9989\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M3 20.2895V5C3 3.89543 3.89543 3 5 3H19C20.1046 3 21 3.89543 21 5V15C21 16.1046 20.1046 17 19 17H7.96125C7.35368 17 6.77906 17.2762 6.39951 17.7506L4.06852 20.6643C3.71421 21.1072 3 20.8567 3 20.2895Z\" stroke=\"#000000\" stroke-width=\"1.5\"></path>\n      </svg>\n    </div>\n    <div class=\"card-title\">Ticket Commercial</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Ticket Commercial')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n      <button class=\"action-btn\" onclick=\"frappe.new_doc('Ticket Commercial')\">+</button>\n    </div>\n  </div>\n\n\n\n\n  <!-- Carte : Devis -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\">\n        <path d=\"M8 14L16 14\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M8 10L10 10\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M8 18L12 18\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M10 3H6C4.89543 3 4 3.89543 4 5V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V5C20 3.89543 19.1046 3 18 3H14.5M10 3V1M10 3V5\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n      </svg>\n    </div>\n    <div class=\"card-title\">Devis</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Quotation')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n    </div>\n  </div>\n\n  <!-- Carte : Commande -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\">\n        <path d=\"M3 6H22L19 16H6L3 6ZM3 6L2.25 3.5\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M11 19.5C11 20.3284 10.3284 21 9.5 21C8.67157 21 8 20.3284 8 19.5\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M17 19.5C17 20.3284 16.3284 21 15.5 21C14.6716 21 14 20.3284 14 19.5\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n      </svg>\n    </div>\n    <div class=\"card-title\">Commande</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Sales Order')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n    </div>\n  </div>\n\n  <!-- Carte : Étude Technique -->\n  \n  \n</div>\n</div>",
  "modified": "2025-12-22 09:10:49.849385",
  "name": "Actions Rapides - Commercial accueil",
  "private": 0,
  "roles": [],
  "script": "// Vérifie si root_element est disponible (fourni par Frappe pour le conteneur du bloc)\nif (root_element) {\n\n  // Fonction pour traiter les cartes et ajouter les badges de comptage\n  const processCards = (container) => {\n    const cards = container.querySelectorAll(\".home-card\");\n    if (cards.length === 0) {\n      return false; // Cartes non prêtes\n    }\n\n    // Supprimé : const colors = [\"badge-info\", \"badge-success\", \"badge-warning\", \"badge-danger\"];\n    // Supprimé : let idx = 0;\n\n    cards.forEach(card => {\n      const btn = card.querySelector(\".card-actions button[onclick*=\\\"List\\\"]\");\n      if (!btn) return;\n\n      const onclickAttr = btn.getAttribute(\"onclick\");\n      const m = onclickAttr.match(/frappe\\.set_route\\(\\s*['\"]List['\"]\\s*,\\s*['\"]([^'\"]+)['\"]\\s*\\)/);\n      if (!m || m.length < 2) return;\n\n      const doctype = m[1];\n      const title = card.querySelector(\".card-title\");\n      if (!title) return;\n\n      // Vérifie si un badge existe déjà\n      if (title.querySelector('.badge')) {\n          return;\n      }\n\n      // Supprimé : const color = colors[idx++ % colors.length];\n\n      // Appel Frappe pour obtenir le nombre via la fonction Python personnalisée\n      frappe.call({\n        method: \"aurescrm.home_badges.get_doctype_count\", // Chemin vers votre fonction Python\n        args: {\n            doctype_name: doctype // Nom de l'argument attendu par la fonction Python\n        },\n        type: \"GET\", // Important: Utiliser GET pour contourner l'erreur 417\n        callback(r) {\n          if (r && r.message !== undefined) {\n            const count = r.message; // Le compte est directement dans r.message\n            const span = document.createElement(\"span\");\n            // Modifié : Applique la classe CSS personnalisée fixe\n            span.className = 'badge badge-custom-count';\n            span.style.marginLeft = \"0.5rem\";\n            span.textContent = count;\n            title.appendChild(span);\n          } else {\n            console.error(`Réponse invalide lors du comptage de ${doctype} via get_doctype_count:`, r);\n          }\n        },\n        error(err) {\n            // Log plus détaillé de l'erreur\n            console.error(`Échec de l'appel get_doctype_count pour ${doctype}:`, err.message || err);\n        }\n      });\n    });\n    return true; // Cartes traitées\n  };\n\n  // Logique d'observation (MutationObserver) et exécution initiale\n  if (!processCards(root_element)) {\n    const obs = new MutationObserver((mutations, observer) => {\n      if (root_element.querySelectorAll(\".home-card\").length) {\n        if (processCards(root_element)) {\n            observer.disconnect();\n        }\n      }\n    });\n    obs.observe(root_element, { childList: true, subtree: true });\n\n    setTimeout(() => {\n        if (root_element.querySelectorAll(\".home-card\").length && !root_element.querySelector(\".home-card .card-title .badge\")) {\n             if(processCards(root_element)) {\n                 obs.disconnect();\n             }\n        }\n    }, 3000);\n  }\n\n} else {\n  console.error(\"Erreur Bloc HTML Personnalisé : 'root_element' n'a pas été trouvé.\");\n}",
  "style": "/* \n  Container principal :\n  - 4 colonnes par défaut (grands écrans)\n  - 2 colonnes si < 1024px\n  - 1 colonne si < 768px\n*/\n.home-cards-container {\n  width: 100%;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 1rem;\n  font-family: \"Inter\", sans-serif;\n}\n\n/* Si vous voulez cibler spécifiquement le deuxième conteneur : */\n/* .home-cards-container:nth-of-type(2) {\n  grid-template-columns: repeat(4, 1fr);\n} */\n\n/* Force chaque carte à remplir sa colonne */\n.home-cards-container .home-card {\n  width: 100%;\n  box-sizing: border-box;\n}\n\n/* Carte individuelle */\n.home-card {\n  border: 1px solid var(--gray-200, #e5e7eb);\n  border-radius: 0.5rem;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 0.5rem 1rem;\n  background-color: #fff;\n}\n\n/* Titre */\n.card-title {\n  font-size: 0.7rem;\n  font-weight: 500;\n  margin: 0;\n}\n\n/* Cercle (pour l'icône) */\n.icon-circle {\n  width: 1.6rem;\n  height: 1.6rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 0.5rem;\n  color: var(--gray-800, #1f2937);\n  font-size: 0.8rem;\n}\n\n/* Boutons alignés à droite dans la carte */\n.card-actions {\n  margin-left: auto;\n  display: flex;\n  gap: 0.5rem;\n}\n\n/* Boutons (même taille que le cercle) */\n.action-btn {\n  width: 1.6rem;\n  height: 1.6rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid var(--gray-200, #e5e7eb);\n  border-radius: 0.5rem;\n  cursor: pointer;\n  color: var(--gray-700, #374151);\n  transition: background-color 0.2s;\n  font-size: 1rem;\n  line-height: 1;\n  background: #fff;\n}\n\n.action-btn:hover {\n  background-color: var(--gray-100, #f3f4f6);\n}\n\n/* TABLETTE : < 1024px => 2 colonnes */\n@media (max-width: 1024px) {\n  .home-cards-container {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n/* MOBILE : < 768px => 1 colonne */\n@media (max-width: 768px) {\n  .home-cards-container {\n    grid-template-columns: 1fr;\n  }\n}\n\n.badge {\n  display: inline-block;\n  padding: 0.2em 0.6em;\n  font-size: 0.9em;\n  font-weight: 500;\n  border-radius: 0.25rem;\n  color: #fff;\n}\n.badge-info    { background-color: #3b82f6; }\n.badge-success { background-color: #10b981; }\n.badge-warning { background-color: #f59e0b; }\n.badge-danger  { background-color: #ef4444; }\n\n.badge-custom-count {\n  background-color: #e7f1ff; /* Un bleu très clair, similaire à l'image */\n  color: #0a58ca; /* Couleur de texte contrastée (bleu foncé) */\n  padding: 0.3em 0.5em; /* Ajustement léger du padding si nécessaire */\n  font-weight: 600; /* Rendre le texte un peu plus gras */\n  vertical-align: middle; /* Meilleur alignement vertical avec le titre */\n}\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div class=\"section-box\"\n     style=\"background:#f8f9fa;\n            border:0.5px solid #dee2e6;\n            border-radius:8px;\n            padding:14px;\">\n\n<!-- Titre de la section -->\n<h3 class=\"section-title\"\n    style=\"\n      font-size:12px;\n      font-weight:600;\n      margin:0 0 14px;\n      display:flex;          /* met l’icône et le texte côte à côte */\n      align-items:center;    /* centre verticalement */\n      gap:6px;               /* espace entre l’icône et le texte */\n    \">\n<svg width=\"14px\" height=\"14px\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\"><path d=\"M5.5 6C5.77614 6 6 5.77614 6 5.5C6 5.22386 5.77614 5 5.5 5C5.22386 5 5 5.22386 5 5.5C5 5.77614 5.22386 6 5.5 6Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M5.5 12.5C5.77614 12.5 6 12.2761 6 12C6 11.7239 5.77614 11.5 5.5 11.5C5.22386 11.5 5 11.7239 5 12C5 12.2761 5.22386 12.5 5.5 12.5Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M5.5 19C5.77614 19 6 18.7761 6 18.5C6 18.2239 5.77614 18 5.5 18C5.22386 18 5 18.2239 5 18.5C5 18.7761 5.22386 19 5.5 19Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M12 6C12.2761 6 12.5 5.77614 12.5 5.5C12.5 5.22386 12.2761 5 12 5C11.7239 5 11.5 5.22386 11.5 5.5C11.5 5.77614 11.7239 6 12 6Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M12 12.5C12.2761 12.5 12.5 12.2761 12.5 12C12.5 11.7239 12.2761 11.5 12 11.5C11.7239 11.5 11.5 11.7239 11.5 12C11.5 12.2761 11.7239 12.5 12 12.5Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M12 19C12.2761 19 12.5 18.7761 12.5 18.5C12.5 18.2239 12.2761 18 12 18C11.7239 18 11.5 18.2239 11.5 18.5C11.5 18.7761 11.7239 19 12 19Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M18.5 6C18.7761 6 19 5.77614 19 5.5C19 5.22386 18.7761 5 18.5 5C18.2239 5 18 5.22386 18 5.5C18 5.77614 18.2239 6 18.5 6Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M18.5 12.5C18.7761 12.5 19 12.2761 19 12C19 11.7239 18.7761 11.5 18.5 11.5C18.2239 11.5 18 11.7239 18 12C18 12.2761 18.2239 12.5 18.5 12.5Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M18.5 19C18.7761 19 19 18.7761 19 18.5C19 18.2239 18.7761 18 18.5 18C18.2239 18 18 18.2239 18 18.5C18 18.7761 18.2239 19 18.5 19Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></svg>\n   Menu Faisabilité\n   \n</h3>\n\n<div class=\"home-cards-container\">\n  <!-- Carte : Clients -->\n \n\n  <!-- Carte : Demande Faisabilité -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\">\n        <path d=\"M12.4961 19.7165L18.4961 16.2879C18.8077 16.1099 19 15.7785 19 15.4197V9.58032C19 9.22147 18.8077 8.89012 18.4961 8.71208L12.4961 5.28351C12.1887 5.10783 11.8113 5.10783 11.5039 5.28351L5.50386 8.71208C5.19229 8.89012 5 9.22147 5 9.58032V15.4197C5 15.7785 5.19229 16.1099 5.50386 16.2879L11.5039 19.7165C11.8113 19.8922 12.1887 19.8922 12.4961 19.7165Z\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M5.5 9.5L12 13M12 13L18.5 9.5M12 13V19.5\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M3 3.01013L3.01 2.99902\" stroke=\"#000000\"></path>\n        <path d=\"M3 21.0101L3.01 20.999\" stroke=\"#000000\"></path>\n        <path d=\"M21 3.01013L21.01 2.99902\" stroke=\"#000000\"></path>\n        <path d=\"M21 21.0101L21.01 20.999\" stroke=\"#000000\"></path>\n      </svg>\n    </div>\n    <div class=\"card-title\">Demande Faisabilité</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Demande Faisabilite')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n      <button class=\"action-btn\" onclick=\"frappe.new_doc('Demande Faisabilite')\">+</button>\n    </div>\n  </div>\n\n  <!-- Carte : Étude Faisabilité -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\">\n        <path d=\"M3 21V3.6C3 3.26863 3.26863 3 3.6 3H21\" stroke=\"#000000\"></path>\n        <path d=\"M17 21H20.4C20.7314 21 21 20.7314 21 20.4V17\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M21 7V9\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M21 12V14\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M7 21H9\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M12 21H14\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n        <path d=\"M3 4C3.55228 4 4 3.55228 4 3C4 2.44772 3.55228 2 3 2C2.44772 2 2 2.44772 2 3C2 3.55228 2.44772 4 3 4Z\" fill=\"#000000\" stroke=\"#000000\"></path>\n        <path d=\"M3 22C3.55228 22 4 21.5523 4 21C4 20.4477 3.55228 20 3 20C2.44772 20 2 20.4477 2 21C2 21.5523 2.44772 22 3 22Z\" fill=\"#000000\" stroke=\"#000000\"></path>\n        <path d=\"M21 4C21.5523 4 22 3.55228 22 3C22 2.44772 21.5523 2 21 2C20.4477 2 20 2.44772 20 3C20 3.55228 20.4477 4 21 4Z\" fill=\"#000000\" stroke=\"#000000\"></path>\n      </svg>\n    </div>\n    <div class=\"card-title\">Étude Faisabilité</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Etude Faisabilite')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n    </div>\n  </div>\n\n  \n\n  <!-- Carte : Étude Technique -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\">\n        <path d=\"M12 17C12.5523 17 13 16.5523 13 16C13 15.4477 12.5523 15 12 15C11.4477 15 11 15.4477 11 16C11 16.5523 11.4477 17 12 17Z\" fill=\"#000000\" stroke=\"#000000\"></path>\n        <path d=\"M21 7.35304L21 16.647C21 16.8649 20.8819 17.0656 20.6914 17.1715L12.2914 21.8381C12.1102 21.9388 11.8898 21.9388 11.7086 21.8381L3.30861 17.1715C3.11814 17.0656 3 16.8649 3 16.647L2.99998 7.35304C2.99998 7.13514 3.11812 6.93437 3.3086 6.82855L11.7086 2.16188C11.8898 2.06121 12.1102 2.06121 12.2914 2.16188L20.6914 6.82855C20.8818 6.93437 21 7.13514 21 7.35304Z\" stroke=\"#000000\"></path>\n        <path d=\"M20.5 16.7222L12.2914 12.1618C12.1102 12.0612 11.8898 12.0612 11.7086 12.1618L3.5 16.7222\"\n stroke=\"#000000\"></path>\n        <path d=\"M3.52844 7.29363L11.7086 11.8382C11.8898 11.9388 12.1102 11.9388 12.2914 11.8382L20.5 7.27783\" stroke=\"#000000\"></path>\n        <path d=\"M12 3L12 12\" stroke=\"#000000\"></path>\n        <path d=\"M12 19.5V22\" stroke=\"#000000\"></path>\n      </svg>\n    </div>\n    <div class=\"card-title\">Étude Technique</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Etude Technique')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n    </div>\n  </div>\n\n  <!-- Carte : Maquette -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\"><path d=\"M21 7.6V20.4C21 20.7314 20.7314 21 20.4 21H7.6C7.26863 21 7 20.7314 7 20.4V7.6C7 7.26863 7.26863 7 7.6 7H20.4C20.7314 7 21 7.26863 21 7.6Z\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M18 4H4.6C4.26863 4 4 4.26863 4 4.6V18\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M7 16.8L12.4444 15L21 18\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M16.5 13C15.6716 13 15 12.3284 15 11.5C15 10.6716 15.6716 10 16.5 10C17.3284 10 18 10.6716 18 11.5C18 12.3284 17.3284 13 16.5 13Z\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></svg>\n    </div>\n    <div class=\"card-title\">Maquette</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Maquette')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n      <button class=\"action-btn\" onclick=\"frappe.new_doc('Maquette')\">+</button>\n    </div>\n  </div>\n\n  <!-- Carte : BAT -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\"><path d=\"M20 12V5.74853C20 5.5894 19.9368 5.43679 19.8243 5.32426L16.6757 2.17574C16.5632 2.06321 16.4106 2 16.2515 2H4.6C4.26863 2 4 2.26863 4 2.6V21.4C4 21.7314 4.26863 22 4.6 22H13\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M8 10H16M8 6H12M8 14H11\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M16 2V5.4C16 5.73137 16.2686 6 16.6 6H20\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M19.9923 15.125L22.5477 15.774C22.8137 15.8416 23.0013 16.0833 22.9931 16.3576C22.8214 22.1159 19.5 23 19.5 23C19.5 23 16.1786 22.1159 16.0069 16.3576C15.9987 16.0833 16.1863 15.8416 16.4523 15.774L19.0077 15.125C19.3308 15.043 19.6692 15.043 19.9923 15.125Z\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></svg>\n    </div>\n    <div class=\"card-title\">BAT</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'BAT')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n      <button class=\"action-btn\" onclick=\"frappe.new_doc('BAT')\">+</button>\n    </div>\n  </div>\n</div>\n</div>",
  "modified": "2025-05-17 11:01:40.360683",
  "name": "Actions Rapides - Technique accueil",
  "private": 0,
  "roles": [],
  "script": "// Vérifie si root_element est disponible (fourni par Frappe pour le conteneur du bloc)\nif (root_element) {\n\n  // Fonction pour traiter les cartes et ajouter les badges de comptage\n  const processCards = (container) => {\n    const cards = container.querySelectorAll(\".home-card\");\n    if (cards.length === 0) {\n      return false; // Cartes non prêtes\n    }\n\n    // Supprimé : const colors = [\"badge-info\", \"badge-success\", \"badge-warning\", \"badge-danger\"];\n    // Supprimé : let idx = 0;\n\n    cards.forEach(card => {\n      const btn = card.querySelector(\".card-actions button[onclick*=\\\"List\\\"]\");\n      if (!btn) return;\n\n      const onclickAttr = btn.getAttribute(\"onclick\");\n      const m = onclickAttr.match(/frappe\\.set_route\\(\\s*['\"]List['\"]\\s*,\\s*['\"]([^'\"]+)['\"]\\s*\\)/);\n      if (!m || m.length < 2) return;\n\n      const doctype = m[1];\n      const title = card.querySelector(\".card-title\");\n      if (!title) return;\n\n      // Vérifie si un badge existe déjà\n      if (title.querySelector('.badge')) {\n          return;\n      }\n\n      // Supprimé : const color = colors[idx++ % colors.length];\n\n      // Appel Frappe pour obtenir le nombre via la fonction Python personnalisée\n      frappe.call({\n        method: \"aurescrm.home_badges.get_doctype_count\", // Chemin vers votre fonction Python\n        args: {\n            doctype_name: doctype // Nom de l'argument attendu par la fonction Python\n        },\n        type: \"GET\", // Important: Utiliser GET pour contourner l'erreur 417\n        callback(r) {\n          if (r && r.message !== undefined) {\n            const count = r.message; // Le compte est directement dans r.message\n            const span = document.createElement(\"span\");\n            // Modifié : Applique la classe CSS personnalisée fixe\n            span.className = 'badge badge-custom-count';\n            span.style.marginLeft = \"0.5rem\";\n            span.textContent = count;\n            title.appendChild(span);\n          } else {\n            console.error(`Réponse invalide lors du comptage de ${doctype} via get_doctype_count:`, r);\n          }\n        },\n        error(err) {\n            // Log plus détaillé de l'erreur\n            console.error(`Échec de l'appel get_doctype_count pour ${doctype}:`, err.message || err);\n        }\n      });\n    });\n    return true; // Cartes traitées\n  };\n\n  // Logique d'observation (MutationObserver) et exécution initiale\n  if (!processCards(root_element)) {\n    const obs = new MutationObserver((mutations, observer) => {\n      if (root_element.querySelectorAll(\".home-card\").length) {\n        if (processCards(root_element)) {\n            observer.disconnect();\n        }\n      }\n    });\n    obs.observe(root_element, { childList: true, subtree: true });\n\n    setTimeout(() => {\n        if (root_element.querySelectorAll(\".home-card\").length && !root_element.querySelector(\".home-card .card-title .badge\")) {\n             if(processCards(root_element)) {\n                 obs.disconnect();\n             }\n        }\n    }, 3000);\n  }\n\n} else {\n  console.error(\"Erreur Bloc HTML Personnalisé : 'root_element' n'a pas été trouvé.\");\n}",
  "style": "/* \n  Container principal :\n  - 4 colonnes par défaut (grands écrans)\n  - 2 colonnes si < 1024px\n  - 1 colonne si < 768px\n*/\n.home-cards-container {\n  width: 100%;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 1rem;\n  font-family: \"Inter\", sans-serif;\n}\n\n/* Si vous voulez cibler spécifiquement le deuxième conteneur : */\n/* .home-cards-container:nth-of-type(2) {\n  grid-template-columns: repeat(4, 1fr);\n} */\n\n/* Force chaque carte à remplir sa colonne */\n.home-cards-container .home-card {\n  width: 100%;\n  box-sizing: border-box;\n}\n\n/* Carte individuelle */\n.home-card {\n  border: 1px solid var(--gray-200, #e5e7eb);\n  border-radius: 0.5rem;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 0.5rem 1rem;\n  background-color: #fff;\n}\n\n/* Titre */\n.card-title {\n  font-size: 0.7rem;\n  font-weight: 500;\n  margin: 0;\n}\n\n/* Cercle (pour l'icône) */\n.icon-circle {\n  width: 1.6rem;\n  height: 1.6rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 0.5rem;\n  color: var(--gray-800, #1f2937);\n  font-size: 0.8rem;\n}\n\n/* Boutons alignés à droite dans la carte */\n.card-actions {\n  margin-left: auto;\n  display: flex;\n  gap: 0.5rem;\n}\n\n/* Boutons (même taille que le cercle) */\n.action-btn {\n  width: 1.6rem;\n  height: 1.6rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid var(--gray-200, #e5e7eb);\n  border-radius: 0.5rem;\n  cursor: pointer;\n  color: var(--gray-700, #374151);\n  transition: background-color 0.2s;\n  font-size: 1rem;\n  line-height: 1;\n  background: #fff;\n}\n\n.action-btn:hover {\n  background-color: var(--gray-100, #f3f4f6);\n}\n\n/* TABLETTE : < 1024px => 2 colonnes */\n@media (max-width: 1024px) {\n  .home-cards-container {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n/* MOBILE : < 768px => 1 colonne */\n@media (max-width: 768px) {\n  .home-cards-container {\n    grid-template-columns: 1fr;\n  }\n}\n\n.badge {\n  display: inline-block;\n  padding: 0.2em 0.6em;\n  font-size: 0.9em;\n  font-weight: 500;\n  border-radius: 0.25rem;\n  color: #fff;\n}\n.badge-info    { background-color: #3b82f6; }\n.badge-success { background-color: #10b981; }\n.badge-warning { background-color: #f59e0b; }\n.badge-danger  { background-color: #ef4444; }\n\n.badge-custom-count {\n  background-color: #e7f1ff; /* Un bleu très clair, similaire à l'image */\n  color: #0a58ca; /* Couleur de texte contrastée (bleu foncé) */\n  padding: 0.3em 0.5em; /* Ajustement léger du padding si nécessaire */\n  font-weight: 600; /* Rendre le texte un peu plus gras */\n  vertical-align: middle; /* Meilleur alignement vertical avec le titre */\n}\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div class=\"section-box\"\n     style=\"background:#f8f9fa;\n            border:0.5px solid #dee2e6;\n            border-radius:8px;\n            padding:14px;\">\n\n<!-- Titre de la section -->\n<h3 class=\"section-title\"\n    style=\"\n      font-size:12px;\n      font-weight:600;\n      margin:0 0 14px;\n      display:flex;          /* met l’icône et le texte côte à côte */\n      align-items:center;    /* centre verticalement */\n      gap:6px;               /* espace entre l’icône et le texte */\n    \">\n<svg width=\"14px\" height=\"14px\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\"><path d=\"M5.5 6C5.77614 6 6 5.77614 6 5.5C6 5.22386 5.77614 5 5.5 5C5.22386 5 5 5.22386 5 5.5C5 5.77614 5.22386 6 5.5 6Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M5.5 12.5C5.77614 12.5 6 12.2761 6 12C6 11.7239 5.77614 11.5 5.5 11.5C5.22386 11.5 5 11.7239 5 12C5 12.2761 5.22386 12.5 5.5 12.5Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M5.5 19C5.77614 19 6 18.7761 6 18.5C6 18.2239 5.77614 18 5.5 18C5.22386 18 5 18.2239 5 18.5C5 18.7761 5.22386 19 5.5 19Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M12 6C12.2761 6 12.5 5.77614 12.5 5.5C12.5 5.22386 12.2761 5 12 5C11.7239 5 11.5 5.22386 11.5 5.5C11.5 5.77614 11.7239 6 12 6Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M12 12.5C12.2761 12.5 12.5 12.2761 12.5 12C12.5 11.7239 12.2761 11.5 12 11.5C11.7239 11.5 11.5 11.7239 11.5 12C11.5 12.2761 11.7239 12.5 12 12.5Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M12 19C12.2761 19 12.5 18.7761 12.5 18.5C12.5 18.2239 12.2761 18 12 18C11.7239 18 11.5 18.2239 11.5 18.5C11.5 18.7761 11.7239 19 12 19Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M18.5 6C18.7761 6 19 5.77614 19 5.5C19 5.22386 18.7761 5 18.5 5C18.2239 5 18 5.22386 18 5.5C18 5.77614 18.2239 6 18.5 6Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M18.5 12.5C18.7761 12.5 19 12.2761 19 12C19 11.7239 18.7761 11.5 18.5 11.5C18.2239 11.5 18 11.7239 18 12C18 12.2761 18.2239 12.5 18.5 12.5Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M18.5 19C18.7761 19 19 18.7761 19 18.5C19 18.2239 18.7761 18 18.5 18C18.2239 18 18 18.2239 18 18.5C18 18.7761 18.2239 19 18.5 19Z\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></svg>\n   Menu Suivi Créances\n   \n</h3>\n\n<div class=\"home-cards-container\">\n\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n      <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\"><path d=\"M22 9V7C22 5.89543 21.1046 5 20 5H4C2.89543 5 2 5.89543 2 7V17C2 18.1046 2.89543 19 4 19H12M22 9H6M22 9V13\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M20.9995 16.05C20.3643 15.402 19.4791 15 18.5 15C16.567 15 15 16.567 15 18.5C15 19.4539 15.3816 20.3187 16.0005 20.95M20.9995 16.05C21.6184 16.6813 22 17.5461 22 18.5C22 20.433 20.433 22 18.5 22C17.5209 22 16.6357 21.598 16.0005 20.95M20.9995 16.05L16.0005 20.95\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></svg>\n    </div>\n    <div class=\"card-title\">Suivi Créance</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Suivi Creance')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n      <button class=\"action-btn\" onclick=\"frappe.new_doc('Suivi Creance')\">+</button>\n    </div>\n  </div>\n\n  <!-- Carte : Étude Technique -->\n  <div class=\"home-card\">\n    <div class=\"icon-circle border bg-light\">\n    <svg width=\"16px\" height=\"16px\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" color=\"#000000\"><path d=\"M21.1679 8C19.6247 4.46819 16.1006 2 11.9999 2C6.81459 2 2.55104 5.94668 2.04932 11\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M17 8H21.4C21.7314 8 22 7.73137 22 7.4V3\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M2.88146 16C4.42458 19.5318 7.94874 22 12.0494 22C17.2347 22 21.4983 18.0533 22 13\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path d=\"M7.04932 16H2.64932C2.31795 16 2.04932 16.2686 2.04932 16.6V21\" stroke=\"#000000\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></svg>\n    </div>\n    <div class=\"card-title\">Génération Suivi Créances</div>\n    <div class=\"card-actions\">\n      <button class=\"action-btn\" onclick=\"frappe.set_route('List', 'Generation Suivi Creance')\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"7\" y1=\"17\" x2=\"17\" y2=\"7\"></line>\n          <polyline points=\"7 7 17 7 17 17\"></polyline>\n        </svg>\n      </button>\n    </div>\n  </div>\n</div>\n</div>\n",
  "modified": "2025-05-17 11:03:41.421141",
  "name": "Suivi créances",
  "private": 0,
  "roles": [
   {
    "parent": "Suivi créances",
    "parentfield": "roles",
    "parenttype": "Custom HTML Block",
    "role": "Administrateur Ventes"
   },
   {
    "parent": "Suivi créances",
    "parentfield": "roles",
    "parenttype": "Custom HTML Block",
    "role": "System Manager"
   },
   {
    "parent": "Suivi créances",
    "parentfield": "roles",
    "parenttype": "Custom HTML Block",
    "role": "Commercial Itinérant"
   },
   {
    "parent": "Suivi créances",
    "parentfield": "roles",
    "parenttype": "Custom HTML Block",
    "role": "Commercial Sédentaire"
   },
   {
    "parent": "Suivi créances",
    "parentfield": "roles",
    "parenttype": "Custom HTML Block",
    "role": "Accounts User"
   },
   {
    "parent": "Suivi créances",
    "parentfield": "roles",
    "parenttype": "Custom HTML Block",
    "role": "Accounts Manager"
   }
  ],
  "script": "// Vérifie si root_element est disponible (fourni par Frappe pour le conteneur du bloc)\nif (root_element) {\n\n  // Fonction pour traiter les cartes (sans badge)\n  const processCards = (container) => {\n    const cards = container.querySelectorAll(\".home-card\");\n    if (cards.length === 0) {\n      return false; // Cartes non prêtes\n    }\n\n    cards.forEach(card => {\n      const btn = card.querySelector(\".card-actions button[onclick*=\\\"List\\\"]\");\n      if (!btn) return;\n\n      const onclickAttr = btn.getAttribute(\"onclick\");\n      const m = onclickAttr.match(/frappe\\.set_route\\(\\s*['\"]List['\"]\\s*,\\s*['\"]([^'\"]+)['\"]\\s*\\)/);\n      if (!m || m.length < 2) return;\n\n      // On ne fait plus rien ici (le code pour les badges est supprimé)\n    });\n    return true; // Cartes traitées\n  };\n\n  // Logique d'observation (MutationObserver) et exécution initiale\n  if (!processCards(root_element)) {\n    const obs = new MutationObserver((mutations, observer) => {\n      if (root_element.querySelectorAll(\".home-card\").length) {\n        if (processCards(root_element)) {\n            observer.disconnect();\n        }\n      }\n    });\n    obs.observe(root_element, { childList: true, subtree: true });\n\n    setTimeout(() => {\n        if (root_element.querySelectorAll(\".home-card\").length) {\n             if(processCards(root_element)) {\n                 obs.disconnect();\n             }\n        }\n    }, 3000);\n  }\n\n} else {\n  console.error(\"Erreur Bloc HTML Personnalisé : 'root_element' n'a pas été trouvé.\");\n}\n",
  "style": "/* \n  Container principal :\n  - 4 colonnes par défaut (grands écrans)\n  - 2 colonnes si < 1024px\n  - 1 colonne si < 768px\n*/\n.home-cards-container {\n  width: 100%;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 1rem;\n  font-family: \"Inter\", sans-serif;\n}\n\n/* Si vous voulez cibler spécifiquement le deuxième conteneur : */\n/* .home-cards-container:nth-of-type(2) {\n  grid-template-columns: repeat(4, 1fr);\n} */\n\n/* Force chaque carte à remplir sa colonne */\n.home-cards-container .home-card {\n  width: 100%;\n  box-sizing: border-box;\n}\n\n/* Carte individuelle */\n.home-card {\n  border: 1px solid var(--gray-200, #e5e7eb);\n  border-radius: 0.5rem;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 0.5rem 1rem;\n  background-color: #fff;\n}\n\n/* Titre */\n.card-title {\n  font-size: 0.7rem;\n  font-weight: 500;\n  margin: 0;\n}\n\n/* Cercle (pour l'icône) */\n.icon-circle {\n  width: 1.6rem;\n  height: 1.6rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 0.5rem;\n  color: var(--gray-800, #1f2937);\n  font-size: 0.8rem;\n}\n\n/* Boutons alignés à droite dans la carte */\n.card-actions {\n  margin-left: auto;\n  display: flex;\n  gap: 0.5rem;\n}\n\n/* Boutons (même taille que le cercle) */\n.action-btn {\n  width: 1.6rem;\n  height: 1.6rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid var(--gray-200, #e5e7eb);\n  border-radius: 0.5rem;\n  cursor: pointer;\n  color: var(--gray-700, #374151);\n  transition: background-color 0.2s;\n  font-size: 1rem;\n  line-height: 1;\n  background: #fff;\n}\n\n.action-btn:hover {\n  background-color: var(--gray-100, #f3f4f6);\n}\n\n/* TABLETTE : < 1024px => 2 colonnes */\n@media (max-width: 1024px) {\n  .home-cards-container {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n/* MOBILE : < 768px => 1 colonne */\n@media (max-width: 768px) {\n  .home-cards-container {\n    grid-template-columns: 1fr;\n  }\n}\n\n.badge {\n  display: inline-block;\n  padding: 0.2em 0.6em;\n  font-size: 0.9em;\n  font-weight: 500;\n  border-radius: 0.25rem;\n  color: #fff;\n}\n.badge-info    { background-color: #3b82f6; }\n.badge-success { background-color: #10b981; }\n.badge-warning { background-color: #f59e0b; }\n.badge-danger  { background-color: #ef4444; }\n\n.badge-custom-count {\n  background-color: #e7f1ff; /* Un bleu très clair, similaire à l'image */\n  color: #0a58ca; /* Couleur de texte contrastée (bleu foncé) */\n  padding: 0.3em 0.5em; /* Ajustement léger du padding si nécessaire */\n  font-weight: 600; /* Rendre le texte un peu plus gras */\n  vertical-align: middle; /* Meilleur alignement vertical avec le titre */\n}\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div class=\"header-container\">\n  <div class=\"user-image-container\">\n    <img id=\"imageUser\" class=\"user-image\" alt=\"User Image\" />\n  </div>\n  <div class=\"text-content\">\n    <h1 class=\"title nom\"></h1> <!-- Titre dynamique pour le nom -->\n    <p class=\"subtitle\">Bienvenue sur <strong>AURES ERP</strong></p>\n  </div>\n  <div class=\"date-content\">\n    <p class=\"date some-class\"></p> <!-- Date dynamique -->\n    <div class=\"icon\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"1\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M8 7V3m8 4V3m-6 8h6M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n      </svg>\n    </div>\n  </div>\n</div>\n\n",
  "modified": "2025-02-21 12:59:01.233169",
  "name": "Accueil",
  "private": 0,
  "roles": [],
  "script": "// Récupérer la date du jour\nvar dateDuJour = new Date();\n\n// Obtenir les composants de la date\nvar jour = dateDuJour.getDate();\nvar mois = dateDuJour.getMonth() + 1; // Les mois commencent à 0, donc ajout de 1\nvar annee = dateDuJour.getFullYear();\nvar title = frappe.session.user_fullname;\n\n// Formater la date\nvar dateFormatee = jour + '/' + mois + '/' + annee;\n\n// Récupérer l'élément avec la classe \"some-class\" dans le framework Frappe\nvar someClassElement = root_element.querySelector('.some-class');\nvar nom = root_element.querySelector('.nom');\n\n// Mettre à jour le contenu de l'élément avec la date formatée\n\nnom.innerHTML = \"Bonjour <strong>\" + title + \"</strong>\";\nsomeClassElement.innerHTML = dateFormatee;\n\nfrappe.call({\n    method: \"frappe.client.get\",\n    args: {\n        doctype: \"User\",\n        name: frappe.session.user, // Récupérer l'utilisateur connecté\n    },\n    callback(r) {\n        if (r.message) {\n            const userImageContainer = root_element.querySelector('.user-image-container');\n            const userImageElement = root_element.querySelector('#imageUser');\n\n            // Supprimer les enfants existants (au cas où)\n            userImageContainer.innerHTML = \"\";\n\n            // Récupérer l'image de l'utilisateur\n            var userImageURL = r.message.user_image;\n\n            // Vérifier si l'image existe\n            if (userImageURL) {\n                // Afficher l'image utilisateur\n                userImageElement.src = userImageURL;\n                userImageElement.style.display = \"block\";\n                userImageContainer.appendChild(userImageElement);\n            } else {\n                // Générer un avatar avec les initiales\n                const fullName = r.message.full_name || frappe.session.user_fullname || \"Utilisateur\";\n                const initials = fullName.split(\" \").map(word => word[0]).join(\"\").slice(0, 2);\n\n                // Créer l'élément avatar\n                const avatarElement = document.createElement(\"div\");\n                avatarElement.className = \"user-avatar\";\n                avatarElement.innerText = initials;\n\n                userImageContainer.appendChild(avatarElement);\n            }\n        }\n    }\n});\n",
  "style": "/* Conteneur principal */\n.header-container {\n  display: flex;\n  flex-wrap: wrap; /* Permet aux éléments de passer à la ligne si nécessaire */\n  align-items: center; /* Aligne les éléments verticalement au centre */\n  background-color: #ffffff; /* Fond blanc */\n  padding: 1rem; /* Espacement interne */\n  border-radius: 0.75rem; /* Coins arrondis */\n  border: 0.5px solid #e5e7eb; /* Bordure grise très fine */\n  width: 100%;\n  gap: 1rem; /* Espacement entre les sections */\n  box-sizing: border-box; /* Inclut le padding dans la largeur totale */\n}\n\n/* Conteneur de l'image utilisateur */\n.user-image-container {\n  flex: 0 0 auto; /* Ne s'étire pas */\n  width: 3rem; /* Taille ajustée */\n  height: 3rem;\n  border-radius: 50%;\n  overflow: hidden;\n  border: 0.5px solid #e5e7eb;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n/* Image utilisateur */\n.user-image {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n/* Avatar utilisateur */\n.user-avatar {\n  width: 3rem;\n  height: 3rem;\n  border-radius: 50%;\n  background-color: #457b9d;\n  color: #ffffff;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 1rem;\n  font-weight: 600;\n  text-transform: uppercase;\n}\n\n/* Contenu textuel */\n.text-content {\n  flex: 1; /* Prend tout l'espace restant */\n  display: flex;\n  flex-direction: column; /* Affiche le texte en colonne */\n  justify-content: center;\n  text-align: left; /* Aligne le texte à gauche */\n  gap: 0.2rem; /* Réduction de l'espacement entre les lignes */\n}\n\n.title {\n  font-size: 1rem; /* Taille réduite */\n  font-weight: 600; /* Gras */\n  color: #1f2937; /* Couleur sombre */\n  margin: 0;\n}\n\n.subtitle {\n  font-size: 0.8rem;\n  font-weight: 400;\n  color: #6b7280;\n  margin: 0;\n}\n\n/* Contenu de la date */\n.date-content {\n  flex: 0 0 auto; /* Ne s'étire pas */\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-left: auto;\n}\n\n.date {\n  font-size: 0.8rem;\n  font-weight: 400;\n  color: #1f2937;\n  margin: 0;\n  white-space: nowrap;\n}\n\n/* Icône */\n.icon {\n  width: 1.5rem;\n  height: 1.5rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: #f3f4f6;\n  border-radius: 50%;\n  color: #1f2937;\n}\n\n/* Média queries */\n@media (max-width: 768px) {\n  .header-container {\n    flex-wrap: nowrap; /* Empêche les éléments de passer à la ligne */\n    text-align: left; /* Texte aligné à gauche */\n    gap: 1rem; /* Espacement suffisant entre les sections */\n  }\n\n  .text-content {\n    text-align: left; /* Aligne toujours le texte à gauche */\n  }\n\n  .date-content {\n    margin-left: auto; /* Place la date à l'extrémité droite */\n  }\n}\n\n@media (max-width: 480px) {\n  .header-container {\n    flex-direction: column; /* Sur très petits écrans, tout passe en colonne */\n    align-items: flex-start; /* Aligne les éléments à gauche */\n  }\n\n  .text-content {\n    text-align: left; /* Assure que le texte reste aligné à gauche */\n    gap: 0.5rem; /* Espacement réduit entre le titre et le sous-titre */\n  }\n\n  .date-content {\n    margin-left: 0; /* Supprime l'espacement gauche */\n    justify-content: flex-start; /* Aligne la date à gauche */\n  }\n}\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div class=\"recent-activity-card\">\n  <div class=\"recent-activity-header\">\n    <div>\n      <h4 class=\"recent-activity-title\">Activités récentes</h4>\n      <p class=\"recent-activity-subtitle\">Derniers 7 jours</p>\n    </div>\n  </div>\n  <ul class=\"recent-activity-list\"></ul>\n  <div class=\"recent-activity-empty\">Aucune activité sur les 7 derniers jours.</div>\n</div>\n",
  "modified": "2026-01-24 00:00:00.000000",
  "name": "Activités récentes",
  "private": 0,
  "roles": [],
  "script": "if (root_element) {\n  const listEl = root_element.querySelector(\".recent-activity-list\");\n  const emptyEl = root_element.querySelector(\".recent-activity-empty\");\n\n  const formatRelative = (timestamp) => {\n    try {\n      return frappe.datetime.prettyDate(timestamp);\n    } catch (e) {\n      return timestamp || \"\";\n    }\n  };\n\n  const renderItems = (items) => {\n    if (!items || items.length === 0) {\n      emptyEl.style.display = \"block\";\n      return;\n    }\n\n    emptyEl.style.display = \"none\";\n    items.forEach((item) => {\n      const li = document.createElement(\"li\");\n      li.className = \"recent-activity-item\";\n\n      const badge = document.createElement(\"span\");\n      badge.className = \"recent-activity-badge \" + (item.action === \"Créé\" ? \"badge-created\" : \"badge-updated\");\n      badge.textContent = item.action || \"\";\n\n      const link = document.createElement(\"a\");\n      link.href = \"#\";\n      link.className = \"recent-activity-link\";\n      link.textContent = `${item.doctype} · ${item.name}`;\n      link.addEventListener(\"click\", (e) => {\n        e.preventDefault();\n        frappe.set_route(\"Form\", item.doctype, item.name);\n      });\n\n      const meta = document.createElement(\"span\");\n      meta.className = \"recent-activity-meta\";\n      meta.textContent = formatRelative(item.timestamp);\n\n      li.appendChild(badge);\n      li.appendChild(link);\n      li.appendChild(meta);\n      listEl.appendChild(li);\n    });\n  };\n\n  frappe.call({\n    method: \"aurescrm.home_activity.get_recent_activity\",\n    type: \"GET\",\n    args: {\n      limit: 10,\n      days: 7,\n    },\n    callback(r) {\n      renderItems(r.message || []);\n    },\n    error(err) {\n      console.error(\"Erreur lors du chargement des activités récentes:\", err);\n      emptyEl.style.display = \"block\";\n    },\n  });\n} else {\n  console.error(\"Erreur Bloc HTML Personnalisé : 'root_element' n'a pas été trouvé.\");\n}\n",
  "style": ".recent-activity-card {\n  background: #ffffff;\n  border: 0.5px solid #e5e7eb;\n  border-radius: 0.75rem;\n  padding: 1rem;\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  font-family: \"Inter\", sans-serif;\n}\n\n.recent-activity-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.recent-activity-title {\n  font-size: 0.95rem;\n  font-weight: 600;\n  margin: 0;\n  color: #1f2937;\n}\n\n.recent-activity-subtitle {\n  font-size: 0.75rem;\n  color: #6b7280;\n  margin: 0.25rem 0 0;\n}\n\n.recent-activity-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.recent-activity-item {\n  display: grid;\n  grid-template-columns: auto 1fr auto;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.35rem 0.5rem;\n  border-radius: 0.5rem;\n  background: #f9fafb;\n}\n\n.recent-activity-link {\n  color: #1f2937;\n  font-size: 0.8rem;\n  text-decoration: none;\n}\n\n.recent-activity-link:hover {\n  text-decoration: underline;\n}\n\n.recent-activity-meta {\n  font-size: 0.7rem;\n  color: #6b7280;\n  white-space: nowrap;\n}\n\n.recent-activity-badge {\n  font-size: 0.65rem;\n  font-weight: 600;\n  padding: 0.15rem 0.4rem;\n  border-radius: 999px;\n  text-transform: uppercase;\n}\n\n.badge-created {\n  background: #e7f7ee;\n  color: #1f7a4b;\n}\n\n.badge-updated {\n  background: #e7f1ff;\n  color: #1d4ed8;\n}\n\n.recent-activity-empty {\n  font-size: 0.8rem;\n  color: #6b7280;\n}\n"
 }
]